<!DOCTYPE html>
    <html lang="zh_CN" data-theme-mode="light" data-light-theme="daylight" data-dark-theme="midnight">
      <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <link rel="stylesheet" type="text/css" id="baseStyle" href="../stage/build/export/base.css?2.10.5" />
        <link
          rel="stylesheet"
          type="text/css"
          id="themeDefaultStyle"
          href="../appearance/themes/daylight/theme.css?2.10.5"
        />

        <title>数据可用性保障</title>
        <style>
          body {
            background-color: var(--b3-theme-background);
            color: var(--b3-theme-on-background);
          }
          .b3-typography,
          .protyle-wysiwyg,
          .protyle-title {
            font-size: 16px !important;
          }
          .b3-typography code:not(.hljs),
          .protyle-wysiwyg span[data-type~="code"] {
            font-variant-ligatures: normal;
          }
          .li > .protyle-action {
            height: 34px;
            line-height: 34px;
          }
          .protyle-wysiwyg [data-node-id].li > .protyle-action ~ .h1,
          .protyle-wysiwyg [data-node-id].li > .protyle-action ~ .h2,
          .protyle-wysiwyg [data-node-id].li > .protyle-action ~ .h3,
          .protyle-wysiwyg [data-node-id].li > .protyle-action ~ .h4,
          .protyle-wysiwyg [data-node-id].li > .protyle-action ~ .h5,
          .protyle-wysiwyg [data-node-id].li > .protyle-action ~ .h6 {
            line-height: 34px;
          }
          .protyle-wysiwyg [data-node-id].li > .protyle-action:after {
            height: 16px;
            width: 16px;
            margin: -8px 0 0 -8px;
          }
          .protyle-wysiwyg [data-node-id].li > .protyle-action svg {
            height: 14px;
          }
          .protyle-wysiwyg [data-node-id].li:before {
            height: calc(100% - 34px);
            top: 34px;
          }
          .protyle-wysiwyg [data-node-id] [spellcheck] {
            min-height: 26px;
          }
          .protyle-wysiwyg [data-node-id] {
          }
          .protyle-wysiwyg .li {
            min-height: 34px;
          }
          .protyle-gutters button svg {
            height: 26px;
          }
          .protyle-wysiwyg img.emoji,
          .b3-typography img.emoji {
            width: 18px;
          }
          .protyle-wysiwyg .h1 img.emoji,
          .b3-typography h1 img.emoji {
            width: 35px;
          }
          .protyle-wysiwyg .h2 img.emoji,
          .b3-typography h2 img.emoji {
            width: 31px;
          }
          .protyle-wysiwyg .h3 img.emoji,
          .b3-typography h3 img.emoji {
            width: 27px;
          }
          .protyle-wysiwyg .h4 img.emoji,
          .b3-typography h4 img.emoji {
            width: 25px;
          }
          .protyle-wysiwyg .h5 img.emoji,
          .b3-typography h5 img.emoji {
            width: 22px;
          }
          .protyle-wysiwyg .h6 img.emoji,
          .b3-typography h6 img.emoji {
            width: 20px;
          }
        </style>
      </head>
      <body>
        <div class="protyle-wysiwyg protyle-wysiwyg--attr" style="max-width: 800px;margin: 0 auto;" id="preview">
          <div data-subtype="h1" data-node-id="20230422103807-d46wjhs" data-type="NodeHeading" class="h1" id="20230422103807-d46wjhs" title="数据可用性保障" updated="20230422120121"><div contenteditable="false" spellcheck="false">数据可用性保障</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h2" data-node-id="20230422112334-gs95gig" data-type="NodeHeading" class="h2" id="20230422112334-gs95gig" updated="20230422112337"><div contenteditable="false" spellcheck="false">本地设备</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20230422103807-3y0po58" data-type="NodeParagraph" class="p" id="20230422103807-3y0po58" updated="20230422112614"><div contenteditable="false" spellcheck="false">在提升本地设备上的数据可用性方面我们做了大量努力：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20230422103932-75ctqj2" data-type="NodeList" class="list" updated="20230422110554" id="20230422103932-75ctqj2"><div data-marker="*" data-subtype="u" data-node-id="20230422103933-a30frix" data-type="NodeListItem" class="li" updated="20230422105840" id="20230422103933-a30frix"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422103933-lzz8fzf" data-type="NodeParagraph" class="p" id="20230422103933-lzz8fzf" updated="20230422105840"><div contenteditable="false" spellcheck="false">编辑器中的内容变更会自动保存到磁盘上，实际写入磁盘时间会根据文档大小有所不同，通常情况下 1 秒以内会完成最终保存</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230422104539-ggakha5" data-type="NodeListItem" class="li" id="20230422104539-ggakha5" updated="20230422110554"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422104539-6lrglh5" data-type="NodeParagraph" class="p" id="20230422104539-6lrglh5" updated="20230422110554"><div contenteditable="false" spellcheck="false">支持文件历史<sup class="footnotes-ref" id="footnotes-ref-1"><a href="#footnotes-def-1">1</a></sup></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230422105131-lnuf75q" data-type="NodeListItem" class="li" id="20230422105131-lnuf75q" updated="20230422110550"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422105131-7q6xxdg" data-type="NodeParagraph" class="p" updated="20230422110550" id="20230422105131-7q6xxdg"><div contenteditable="false" spellcheck="false">支持数据快照<sup class="footnotes-ref" id="footnotes-ref-8"><a href="#footnotes-def-8">8</a></sup></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230422105520-57ndqxi" data-type="NodeListItem" class="li" id="20230422105520-57ndqxi" updated="20230422105534"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422105520-ot34p72" data-type="NodeParagraph" class="p" id="20230422105520-ot34p72" updated="20230422105534"><div contenteditable="false" spellcheck="false">支持完整导出和导入 Data 压缩包</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230422105258-oj5avjn" data-type="NodeListItem" class="li" id="20230422105258-oj5avjn" updated="20230422105556"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422105258-qgwd6ti" data-type="NodeParagraph" class="p" id="20230422105258-qgwd6ti" updated="20230422105556"><div contenteditable="false" spellcheck="false">禁止通过第三方同步盘软件同步数据以避免造成文件损坏</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20230422110315-sv2rsvh" data-type="NodeParagraph" class="p" id="20230422110315-sv2rsvh" updated="20230422120114"><div contenteditable="false" spellcheck="false">通过这些努力，我们已经尽量保障了本地设备上的数据可用性。但请注意的是，这些保障落实的前提是设备磁盘不发生故障和意外。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h2" data-node-id="20230422112342-lf07rux" data-type="NodeHeading" class="h2" id="20230422112342-lf07rux" updated="20230422112545"><div contenteditable="false" spellcheck="false">云端同步</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20230422110805-kprcrel" data-type="NodeParagraph" class="p" id="20230422110805-kprcrel" updated="20230422120121"><div contenteditable="false" spellcheck="false">仅仅提升本地设备上的数据可用性是不够的，因为云端数据同步<sup class="footnotes-ref" id="footnotes-ref-5"><a href="#footnotes-def-5">5</a></sup>是刚性需求之一。数据同步会影响本地设备数据，所以我们也要尽量保障同步后数据的可用性：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20230422105530-t203zzx" data-type="NodeList" class="list" id="20230422105530-t203zzx" updated="20230422111009"><div data-marker="*" data-subtype="u" data-node-id="20230422111009-aum0wmg" data-type="NodeListItem" class="li" id="20230422111009-aum0wmg" updated="20230422111009"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422111009-3zbriwj" data-type="NodeParagraph" class="p" id="20230422111009-3zbriwj" updated="20230422112940"><div contenteditable="false" spellcheck="false">同步前生成数据快照，如果出现非预期的同步结果则可以通过该快照回滚</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230422111101-87ev2o5" data-type="NodeListItem" class="li" id="20230422111101-87ev2o5"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422111101-0r12nnu" data-type="NodeParagraph" class="p" id="20230422111101-0r12nnu" updated="20230422111514"><div contenteditable="false" spellcheck="false">同步时如果发生文件冲突</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20230422111237-jl4ylxp" data-type="NodeList" class="list" id="20230422111237-jl4ylxp"><div data-marker="*" data-subtype="u" data-node-id="20230422111237-qjf48w4" data-type="NodeListItem" class="li" id="20230422111237-qjf48w4"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422111237-bibelfs" data-type="NodeParagraph" class="p" id="20230422111237-bibelfs" updated="20230422111245"><div contenteditable="false" spellcheck="false">自动生成文件历史，可以通过文件历史回滚</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230422111247-182j3sj" data-type="NodeListItem" class="li" id="20230422111247-182j3sj"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422111247-djwfifo" data-type="NodeParagraph" class="p" id="20230422111247-djwfifo" updated="20230422111356"><div contenteditable="false" spellcheck="false">也可以在 <span data-type="kbd">设置</span>​ - <span data-type="kbd">云端</span>​ 中开启 <span data-type="kbd">同步冲突时生成冲突文档</span>​</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230422111357-fljcvsw" data-type="NodeListItem" class="li" id="20230422111357-fljcvsw"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422111357-nzhi5p1" data-type="NodeParagraph" class="p" id="20230422111357-nzhi5p1" updated="20230422113002"><div contenteditable="false" spellcheck="false">支持在 <span data-type="kbd">数据历史</span>​ - <span data-type="kbd">数据快照</span>​ - <span data-type="kbd">云端快照</span>​ 中浏览和下载云端快照</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h2" data-node-id="20230422113341-bhsow86" data-type="NodeHeading" class="h2" id="20230422113341-bhsow86" updated="20230422113914"><div contenteditable="false" spellcheck="false">总结</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20230422113915-snwmnoi" data-type="NodeParagraph" class="p" id="20230422113915-snwmnoi" updated="20230422115400"><div contenteditable="false" spellcheck="false">通过以上保障措施，希望你不再对数据可用性方面产生太多顾虑，请放心使用。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20230422114701-u3eikhs" data-type="NodeParagraph" class="p" id="20230422114701-u3eikhs" updated="20230422115415"><div contenteditable="false" spellcheck="false">尽管如此，我们依然建议你参考 321 备份原则（至少 3 个副本、2 种介质和 1 个异地存储）进行定期数据备份。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20230422103921-3f5n674" data-type="NodeParagraph" class="p" id="20230422103921-3f5n674" updated="20230422115541"><div contenteditable="false" spellcheck="false">欢迎给我们反馈更多建议，数据可用性是重中之重，期待在大家的努力下不断提高它。</div><div class="protyle-attr" contenteditable="false"></div></div><div class="footnotes-defs-div"><hr class="footnotes-defs-hr" />
<ol class="footnotes-defs-ol"><li><div data-subtype="h2" data-node-id="20220615111435-ownalnb" data-type="NodeHeading" class="h2" id="20220615111435-ownalnb" updated="20220615111459"><div contenteditable="false" spellcheck="false"><span id="footnotes-def-1"></span>文件历史</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20220615111435-mm5qpqp" data-type="NodeHeading" class="h3" id="20220615111435-mm5qpqp" updated="20220615112944"><div contenteditable="false" spellcheck="false">文件历史生成规则</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20210403160319-ufy7jta" data-type="NodeList" class="list" id="20210403160319-ufy7jta" updated="20230403114310"><div data-marker="*" data-subtype="u" data-node-id="20210403160319-8uzmero" data-type="NodeListItem" class="li" id="20210403160319-8uzmero" updated="20220831210638"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20210524213102-cwl7v2f" data-type="NodeParagraph" class="p" id="20210524213102-cwl7v2f" updated="20220831210638"><div contenteditable="false" spellcheck="false">每隔 10 分钟会对这 10 分钟内更新过的文档生成历史（间隔时间可通过 <span data-type="kbd">设置</span>​ - <span data-type="kbd">编辑器</span>​ - <span data-type="kbd">历史生成间隔</span>​ 进行调整），历史文件夹后缀为 <span data-type="code">-update</span>​</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220501134315-6omumob" data-type="NodeListItem" class="li" id="20220501134315-6omumob" updated="20220501134735"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501134315-1h4mvgn" data-type="NodeParagraph" class="p" updated="20220501134735" id="20220501134315-1h4mvgn"><div contenteditable="false" spellcheck="false">云端同步时，本地被云端覆盖的数据会生成历史，历史文件夹后缀为 <span data-type="code">-sync</span>​</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220501134333-kamak39" data-type="NodeListItem" class="li" id="20220501134333-kamak39" updated="20220501134747"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501134333-1f6hbi9" data-type="NodeParagraph" class="p" id="20220501134333-1f6hbi9" updated="20220501134747"><div contenteditable="false" spellcheck="false">手动删除笔记本、文档和资源文件时会生成历史，历史文件夹后缀为 <span data-type="code">-delete</span>​</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20210524213119-wybx1kh" data-type="NodeListItem" class="li" id="20210524213119-wybx1kh" updated="20220830225509"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20210524213119-ofmb315" data-type="NodeParagraph" class="p" id="20210524213119-ofmb315" updated="20220830225509"><div contenteditable="false" spellcheck="false">使用清理未引用资源<sup class="footnotes-ref" id="footnotes-ref-2"><a href="#footnotes-def-2">2</a></sup>时会生成历史，历史文件夹后缀为 <span data-type="code">-clean</span>​</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220501134920-qb6wh0b" data-type="NodeListItem" class="li" id="20220501134920-qb6wh0b" updated="20230403114300"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501134920-k403n1r" data-type="NodeParagraph" class="p" id="20220501134920-k403n1r" updated="20230403114300"><div contenteditable="false" spellcheck="false">使用优化排版<sup class="footnotes-ref" id="footnotes-ref-3"><a href="#footnotes-def-3">3</a></sup>时会生成历史，历史文件夹后缀为 <span data-type="code">-format</span>​</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230403113929-44xkaoz" data-type="NodeListItem" class="li" id="20230403113929-44xkaoz" updated="20230403114310"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230403113929-ud36ubv" data-type="NodeParagraph" class="p" id="20230403113929-ud36ubv" updated="20230403114310"><div contenteditable="false" spellcheck="false">使用 <span data-type="kbd">搜索替换</span>​ 时会生成历史，历史文件夹后缀为 <span data-type="code">-replace</span>​</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20210104090742-f9nkimo" data-type="NodeHeading" class="h3" updated="20220615112949" id="20210104090742-f9nkimo"><div contenteditable="false" spellcheck="false">浏览文件历史</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20210104090742-8rmcz3i" data-type="NodeList" class="list" id="20210104090742-8rmcz3i" updated="20220830230716"><div data-marker="*" data-subtype="u" data-node-id="20220501135052-k47n4ms" data-type="NodeListItem" class="li" updated="20220830230716" id="20220501135052-k47n4ms"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501135052-o3r30jj" data-type="NodeParagraph" class="p" id="20220501135052-o3r30jj" updated="20220830230716"><div contenteditable="false" spellcheck="false">点击顶部工具栏 <span data-type="kbd">数据历史</span> 按钮或者 <span data-type="kbd">Alt+H</span> 可打开数据历史界面，切换到 <span data-type="kbd">文件历史</span> 页签，如果没有历史数据显示，可以试下该界面的 <span data-type="kbd">重建索引</span></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220501135057-pa9pcyo" data-type="NodeListItem" class="li" id="20220501135057-pa9pcyo" updated="20220501135111"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501135057-4hmpdzy" data-type="NodeParagraph" class="p" id="20220501135057-4hmpdzy" updated="20220501135111"><div contenteditable="false" spellcheck="false">在文件系统 <span data-type="code">工作空间/history/</span> 文件夹下浏览</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20210104090742-hjfornp" data-type="NodeHeading" class="h3" id="20210104090742-hjfornp" updated="20220615112957"><div contenteditable="false" spellcheck="false">通过文件历史回滚</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20210121105921-zdk68jf" data-type="NodeParagraph" class="p" id="20210121105921-zdk68jf" updated="20220615120058"><div contenteditable="false" spellcheck="false">在数据历史界面左侧时间列表栏中，每一条历史记录右侧都有一个回滚按钮，点击以后将弹出确认对话框，如果确认回滚的话将使用文件历史覆盖现有文件。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220501133017-3hecoih" data-type="NodeParagraph" class="p" id="20220501133017-3hecoih" updated="20220501133133"><div contenteditable="false" spellcheck="false">如果有非常多的文件需要回滚，建议手动在文件系统上复制。历史文件夹的内部结构和 data 内部结构一致，比如：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20220501133105-b25vi0a" data-type="NodeList" class="list" id="20220501133105-b25vi0a" updated="20220831210446"><div data-marker="*" data-subtype="u" data-node-id="20220501133105-kzow9y3" data-type="NodeListItem" class="li" id="20220501133105-kzow9y3" updated="20220501133105"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501133105-1dmg0zl" data-type="NodeParagraph" class="p" updated="20220501133105" id="20220501133105-1dmg0zl"><div contenteditable="false" spellcheck="false">笔记本删除：<span data-type="code">2022-05-01-091021-delete/20210808180117-czj9bvb/</span>，即 <span data-type="code">历史生成日期-{操作}/{笔记本 ID}/</span></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220501133105-ham1o5d" data-type="NodeListItem" class="li" id="20220501133105-ham1o5d" updated="20220501134003"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501133105-a1rwa0u" data-type="NodeParagraph" class="p" id="20220501133105-a1rwa0u" updated="20220501134003"><div contenteditable="false" spellcheck="false">文档删除：<span data-type="code">2022-05-01-091209-delete/20210808180117-czj9bvb/20200812220555-lj3enxa.sy</span>，即 <span data-type="code">历史生成日期-{操作}/{笔记本 ID}/{文档路径}</span></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220501133105-486vgy6" data-type="NodeListItem" class="li" id="20220501133105-486vgy6" updated="20220831210446"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501133105-jqnfpzv" data-type="NodeParagraph" class="p" updated="20220831210446" id="20220501133105-jqnfpzv"><div contenteditable="false" spellcheck="false">资源文件清理：<span data-type="code">2022-05-01-095621-clean/assets/image-20220501091157-qccp87e.png</span>，即 <span data-type="code">历史生成日期-{操作}/assets/{资源文件名}</span></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220501133041-w6ydfgw" data-type="NodeParagraph" class="p" id="20220501133041-w6ydfgw" updated="20220501133251"><div contenteditable="false" spellcheck="false">手动回滚操作步骤：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="o" data-node-id="20220501133237-il09opg" data-type="NodeList" class="list" id="20220501133237-il09opg" updated="20220615111149"><div data-marker="1." data-subtype="o" data-node-id="20220501133254-az0u30r" data-type="NodeListItem" class="li" id="20220501133254-az0u30r" updated="20220501133340"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">1.</div><div data-node-id="20220501133254-4ztj9yt" data-type="NodeParagraph" class="p" id="20220501133254-4ztj9yt" updated="20220501133340"><div contenteditable="false" spellcheck="false">退出思源，然后全量复制备份一下整个工作空间，避免后续误操作导致数据丢失</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="2." data-subtype="o" data-node-id="20220501133342-7fu44br" data-type="NodeListItem" class="li" id="20220501133342-7fu44br" updated="20220501133421"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">2.</div><div data-node-id="20220501133342-j92vqhx" data-type="NodeParagraph" class="p" id="20220501133342-j92vqhx" updated="20220501133421"><div contenteditable="false" spellcheck="false">进入 <span data-type="code">工作空间/history/</span> 文件夹，将 <span data-type="code">历史生成日期-{操作}</span> 文件夹下的数据直接复制到 data 文件夹进行覆盖</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="3." data-subtype="o" data-node-id="20220501133422-0nxnwc2" data-type="NodeListItem" class="li" id="20220501133422-0nxnwc2" updated="20220615111149"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">3.</div><div data-node-id="20220501133422-gc6qund" data-type="NodeParagraph" class="p" id="20220501133422-gc6qund" updated="20220615111149"><div contenteditable="false" spellcheck="false">启动思源后手动执行重建索引</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20220615115547-2fr6uej" data-type="NodeHeading" class="h3" id="20220615115547-2fr6uej" updated="20220615115551"><div contenteditable="false" spellcheck="false">清理文件历史</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220615115551-u75o5mk" data-type="NodeParagraph" class="p" updated="20220615115618" id="20220615115551-u75o5mk"><div contenteditable="false" spellcheck="false">默认自动保存最近 30 天生成的文件历史，可通过 <span data-type="kbd">设置</span> - <span data-type="kbd">编辑器</span> - <span data-type="kbd">历史保留天数</span> 进行调整，超过该期限的文件历史会被自动删除。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220615115625-3dx0t1j" data-type="NodeParagraph" class="p" updated="20220830230414" id="20220615115625-3dx0t1j"><div contenteditable="false" spellcheck="false">如果你想清空所有文件历史数据，可以点击 <span data-type="kbd">设置</span> - <span data-type="kbd">编辑器</span> - <span data-type="kbd">清空所有历史</span>，或者手动删除 <span data-type="code">工作空间/history/</span> 文件夹，然后在 <span data-type="kbd">文件历史</span> 中 <span data-type="kbd">重建索引</span>。</div><div class="protyle-attr" contenteditable="false"></div></div></li>
<li><div data-subtype="h2" data-node-id="20210115222011-bzsftun" data-type="NodeHeading" class="h2" id="20210115222011-bzsftun"><div contenteditable="false" spellcheck="false"><span id="footnotes-def-2"></span>清理未引用资源</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20210115222053-i62ppkz" data-type="NodeParagraph" class="p" id="20210115222053-i62ppkz" updated="20210503095856"><div contenteditable="false" spellcheck="false">“引用”指的是通过超链接、插入图片或者 HTML 标签（例如 <span data-type="code">&lt;img&gt;</span> 、<span data-type="code">&lt;iframe&gt;</span>）的属性 <span data-type="code">src</span> 对资源文件进行链接。这里分为两种情况：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="o" data-node-id="20210115222514-tqfsawm" data-type="NodeList" class="list" id="20210115222514-tqfsawm" updated="20220711121929"><div data-marker="1." data-subtype="o" data-node-id="20210115222515-47r5lop" data-type="NodeListItem" class="li" id="20210115222515-47r5lop" updated="20220711121929"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">1.</div><div data-node-id="20210204172443-a8xpkb9" data-type="NodeParagraph" class="p" id="20210204172443-a8xpkb9" updated="20220711121929"><div contenteditable="false" spellcheck="false">引用具体的资源文件，比如图片或者文件。如果资源文件是 PDF 且做过标注，那么无论它是否被引用都不会计入清理</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="2." data-subtype="o" data-node-id="20210115222545-nilj84d" data-type="NodeListItem" class="li" id="20210115222545-nilj84d" updated="20220711121528"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">2.</div><div data-node-id="20210204172443-zyll68d" data-type="NodeParagraph" class="p" id="20210204172443-zyll68d" updated="20220711121528"><div contenteditable="false" spellcheck="false">引用资源文件夹（在 assets 文件夹下的子文件夹），必须以 <span data-type="code">/</span> 结尾，比如 <span data-type="code">[foo](assets/bar/)</span>。一个资源文件夹如果被引用，则下面所有资源文件无论是否被单独引用，都会被算作已经引用</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20210115223610-ffnxstf" data-type="NodeParagraph" class="p" updated="20220711122042" id="20210115223610-ffnxstf"><div contenteditable="false" spellcheck="false">在 <span data-type="kbd">设置</span> - <span data-type="kbd">资源</span> 中可以一键清理未引用资源，如果需要找回被误删的文件，请通过回滚。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20210130103406-8jfbo6k" data-type="NodeParagraph" class="p" id="20210130103406-8jfbo6k" updated="20210512160659"><div contenteditable="false" spellcheck="false">​<span data-type="tag">注意</span>​：使用绝对路径（本地路径或者是网络路径）不会纳入清理计算。</div><div class="protyle-attr" contenteditable="false"></div></div></li>
<li><div data-subtype="h1" data-node-id="20230915114759-qjft6is" data-type="NodeHeading" class="h1"><div contenteditable="false" spellcheck="false"><span id="footnotes-def-3"></span>优化排版</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h2" data-node-id="20220628204444-yil2u2m" data-type="NodeHeading" class="h2" id="20220628204444-yil2u2m" updated="20220628204604"><div contenteditable="false" spellcheck="false">概述</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220628204604-qom7yyl" data-type="NodeParagraph" class="p" id="20220628204604-qom7yyl" updated="20221006214307"><div contenteditable="false" spellcheck="false">为了快速记录内容，我们时常会忽略一些排版细节，比如行级代码前后或者加粗前后缺少空格、中文和西文之间缺少空格。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220628205215-z3whiwr" data-type="NodeParagraph" class="p" id="20220628205215-z3whiwr" updated="20220628215004"><div contenteditable="false" spellcheck="false">这样会导致内容排版看上去不够精致，以后浏览该内容时也有一定视觉干扰。当然，这只是我们的感触，也许这并不是问题，甚至本来就需要这样紧凑排版。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h2" data-node-id="20220628205558-6krkd89" data-type="NodeHeading" class="h2" id="20220628205558-6krkd89" updated="20220628205611"><div contenteditable="false" spellcheck="false">使用方式</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220628205611-ikc5gy0" data-type="NodeParagraph" class="p" id="20220628205611-ikc5gy0" updated="20220628205851"><div contenteditable="false" spellcheck="false">在编辑器右上角 <span data-type="kbd" id="">...</span> 菜单中选择 <span data-type="kbd" id="">优化排版</span>，处理完成后文档中的如下元素前后会被自动插入一个空格：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20220628205832-odovge3" data-type="NodeList" class="list" id="20220628205832-odovge3" updated="20221006214303"><div data-marker="*" data-subtype="u" data-node-id="20220628205833-kmfuhsp" data-type="NodeListItem" class="li" id="20220628205833-kmfuhsp" updated="20221006214303"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220628205833-iu4yxrq" data-type="NodeParagraph" class="p" id="20220628205833-iu4yxrq" updated="20221006214303"><div contenteditable="false" spellcheck="false">行级代码</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220628205855-jp2ks1q" data-type="NodeListItem" class="li" id="20220628205855-jp2ks1q" updated="20220916195220"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220628205855-1gfuu51" data-type="NodeParagraph" class="p" id="20220628205855-1gfuu51" updated="20220916195220"><div contenteditable="false" spellcheck="false">行级公式</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220628210000-ives8vm" data-type="NodeParagraph" class="p" id="20220628210000-ives8vm" updated="20220630211006"><div contenteditable="false" spellcheck="false">另外，如下元素中的中西文间也会自动插入一个空格：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20220630211006-svizyw7" data-type="NodeList" class="list" id="20220630211006-svizyw7" updated="20220630211109"><div data-marker="*" data-subtype="u" data-node-id="20220630211007-dsx48yk" data-type="NodeListItem" class="li" id="20220630211007-dsx48yk" updated="20220630211007"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220630211007-26zt41e" data-type="NodeParagraph" class="p" id="20220630211007-26zt41e" updated="20220630211032"><div contenteditable="false" spellcheck="false">标签</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220630211033-fnlmuvi" data-type="NodeListItem" class="li" id="20220630211033-fnlmuvi"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220630211033-b7xfx2z" data-type="NodeParagraph" class="p" id="20220630211033-b7xfx2z" updated="20220630211037"><div contenteditable="false" spellcheck="false">高亮</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220630211037-mntb5y9" data-type="NodeListItem" class="li" id="20220630211037-mntb5y9"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220630211037-lftq994" data-type="NodeParagraph" class="p" id="20220630211037-lftq994" updated="20220630211045"><div contenteditable="false" spellcheck="false">删除线</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220630211045-4ve578l" data-type="NodeListItem" class="li" id="20220630211045-4ve578l"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220630211045-58vch5e" data-type="NodeParagraph" class="p" id="20220630211045-58vch5e" updated="20220630211054"><div contenteditable="false" spellcheck="false">超链接锚文本</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220630211054-5om39qm" data-type="NodeListItem" class="li" id="20220630211054-5om39qm"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220630211054-tx41ceb" data-type="NodeParagraph" class="p" id="20220630211054-tx41ceb" updated="20220630211101"><div contenteditable="false" spellcheck="false">普通文本</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220630211101-1txhfqw" data-type="NodeListItem" class="li" id="20220630211101-1txhfqw"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220630211101-zcj15cy" data-type="NodeParagraph" class="p" id="20220630211101-zcj15cy" updated="20220630211108"><div contenteditable="false" spellcheck="false">强调</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220630211108-356v085" data-type="NodeListItem" class="li" id="20220630211108-356v085" updated="20220630211109"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220630211108-wlwci62" data-type="NodeParagraph" class="p" id="20220630211108-wlwci62" updated="20220630211109"><div contenteditable="false" spellcheck="false">加粗</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h2" data-node-id="20220628210321-x8cf0vr" data-type="NodeHeading" class="h2" id="20220628210321-x8cf0vr" updated="20220628210344"><div contenteditable="false" spellcheck="false">自动备份</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220628210345-fsoqtka" data-type="NodeParagraph" class="p" id="20220628210345-fsoqtka" updated="20220628214153"><div contenteditable="false" spellcheck="false">在实际执行优化排版之前，思源会自动备份一次原有的文档，这样如果优化结果不满意也能够通过数据历史<sup class="footnotes-ref" id="footnotes-ref-4"><a href="#footnotes-def-4">4</a></sup>进行回滚。</div><div class="protyle-attr" contenteditable="false"></div></div></li>
<li><div data-subtype="h1" data-node-id="20230915114759-zsdrjn3" data-type="NodeHeading" class="h1"><div contenteditable="false" spellcheck="false"><span id="footnotes-def-4"></span>数据历史</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h2" data-node-id="20220501134357-003dftr" data-type="NodeHeading" class="h2" id="20220501134357-003dftr" updated="20230403113939"><div contenteditable="false" spellcheck="false">概述</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220501134418-ql8s90v" data-type="NodeParagraph" class="p" id="20220501134418-ql8s90v" updated="20220615111558"><div contenteditable="false" spellcheck="false">数据历史主要用于保证数据安全，即使发生误操作也能通过历史进行数据回滚。数据历史分为两个功能：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20220615111559-oiv8079" data-type="NodeList" class="list" id="20220615111559-oiv8079" updated="20220615112117"><div data-marker="*" data-subtype="u" data-node-id="20220615111600-89ecgx0" data-type="NodeListItem" class="li" id="20220615111600-89ecgx0" updated="20220615111600"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220615111600-ag04crg" data-type="NodeParagraph" class="p" id="20220615111600-ag04crg" updated="20220615112026"><div contenteditable="false" spellcheck="false">文件历史：按原始文件方式保存在 <span data-type="code">工作空间/history/</span> 文件夹下，人类可读，可手动拷贝到 data 对应位置恢复</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220615111601-l9ydpwh" data-type="NodeListItem" class="li" id="20220615111601-l9ydpwh" updated="20220615112117"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220615111601-8oaj5t3" data-type="NodeParagraph" class="p" id="20220615111601-8oaj5t3" updated="20220615112117"><div contenteditable="false" spellcheck="false">数据快照：按文件分块、加密并压缩保存在 <span data-type="code">工作空间/repo/</span> 文件夹下，人类不可读，无法手动恢复</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220615112117-57abhen" data-type="NodeParagraph" class="p" id="20220615112117-57abhen" updated="20220830225617"><div contenteditable="false" spellcheck="false">数据快照除了用于本地数据历史，还用于云端数据同步<sup class="footnotes-ref" id="footnotes-ref-5"><a href="#footnotes-def-5">5</a></sup>。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h2" data-node-id="20220615111435-ownalnb" data-type="NodeHeading" class="h2" id="20220615111435-ownalnb" updated="20220615111459"><div contenteditable="false" spellcheck="false">文件历史</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20220615111435-mm5qpqp" data-type="NodeHeading" class="h3" id="20220615111435-mm5qpqp" updated="20220615112944"><div contenteditable="false" spellcheck="false">文件历史生成规则</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20210403160319-ufy7jta" data-type="NodeList" class="list" id="20210403160319-ufy7jta" updated="20230403114310"><div data-marker="*" data-subtype="u" data-node-id="20210403160319-8uzmero" data-type="NodeListItem" class="li" id="20210403160319-8uzmero" updated="20220831210638"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20210524213102-cwl7v2f" data-type="NodeParagraph" class="p" id="20210524213102-cwl7v2f" updated="20220831210638"><div contenteditable="false" spellcheck="false">每隔 10 分钟会对这 10 分钟内更新过的文档生成历史（间隔时间可通过 <span data-type="kbd">设置</span>​ - <span data-type="kbd">编辑器</span>​ - <span data-type="kbd">历史生成间隔</span>​ 进行调整），历史文件夹后缀为 <span data-type="code">-update</span>​</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220501134315-6omumob" data-type="NodeListItem" class="li" id="20220501134315-6omumob" updated="20220501134735"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501134315-1h4mvgn" data-type="NodeParagraph" class="p" id="20220501134315-1h4mvgn" updated="20220501134735"><div contenteditable="false" spellcheck="false">云端同步时，本地被云端覆盖的数据会生成历史，历史文件夹后缀为 <span data-type="code">-sync</span>​</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220501134333-kamak39" data-type="NodeListItem" class="li" id="20220501134333-kamak39" updated="20220501134747"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501134333-1f6hbi9" data-type="NodeParagraph" class="p" id="20220501134333-1f6hbi9" updated="20220501134747"><div contenteditable="false" spellcheck="false">手动删除笔记本、文档和资源文件时会生成历史，历史文件夹后缀为 <span data-type="code">-delete</span>​</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20210524213119-wybx1kh" data-type="NodeListItem" class="li" id="20210524213119-wybx1kh" updated="20220830225509"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20210524213119-ofmb315" data-type="NodeParagraph" class="p" id="20210524213119-ofmb315" updated="20220830225509"><div contenteditable="false" spellcheck="false">使用清理未引用资源<sup class="footnotes-ref" id="footnotes-ref-2"><a href="#footnotes-def-2">2</a></sup>时会生成历史，历史文件夹后缀为 <span data-type="code">-clean</span>​</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220501134920-qb6wh0b" data-type="NodeListItem" class="li" id="20220501134920-qb6wh0b" updated="20230403114300"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501134920-k403n1r" data-type="NodeParagraph" class="p" id="20220501134920-k403n1r" updated="20230403114300"><div contenteditable="false" spellcheck="false">使用优化排版<sup class="footnotes-ref" id="footnotes-ref-3"><a href="#footnotes-def-3">3</a></sup>时会生成历史，历史文件夹后缀为 <span data-type="code">-format</span>​</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230403113929-44xkaoz" data-type="NodeListItem" class="li" updated="20230403114310" id="20230403113929-44xkaoz"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230403113929-ud36ubv" data-type="NodeParagraph" class="p" id="20230403113929-ud36ubv" updated="20230403114310"><div contenteditable="false" spellcheck="false">使用 <span data-type="kbd">搜索替换</span>​ 时会生成历史，历史文件夹后缀为 <span data-type="code">-replace</span>​</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20210104090742-f9nkimo" data-type="NodeHeading" class="h3" id="20210104090742-f9nkimo" updated="20220615112949"><div contenteditable="false" spellcheck="false">浏览文件历史</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20210104090742-8rmcz3i" data-type="NodeList" class="list" id="20210104090742-8rmcz3i" updated="20220830230716"><div data-marker="*" data-subtype="u" data-node-id="20220501135052-k47n4ms" data-type="NodeListItem" class="li" id="20220501135052-k47n4ms" updated="20220830230716"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501135052-o3r30jj" data-type="NodeParagraph" class="p" id="20220501135052-o3r30jj" updated="20220830230716"><div contenteditable="false" spellcheck="false">点击顶部工具栏 <span data-type="kbd">数据历史</span> 按钮或者 <span data-type="kbd">Alt+H</span> 可打开数据历史界面，切换到 <span data-type="kbd">文件历史</span> 页签，如果没有历史数据显示，可以试下该界面的 <span data-type="kbd">重建索引</span></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220501135057-pa9pcyo" data-type="NodeListItem" class="li" id="20220501135057-pa9pcyo" updated="20220501135111"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501135057-4hmpdzy" data-type="NodeParagraph" class="p" id="20220501135057-4hmpdzy" updated="20220501135111"><div contenteditable="false" spellcheck="false">在文件系统 <span data-type="code">工作空间/history/</span> 文件夹下浏览</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20210104090742-hjfornp" data-type="NodeHeading" class="h3" id="20210104090742-hjfornp" updated="20220615112957"><div contenteditable="false" spellcheck="false">通过文件历史回滚</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20210121105921-zdk68jf" data-type="NodeParagraph" class="p" id="20210121105921-zdk68jf" updated="20220615120058"><div contenteditable="false" spellcheck="false">在数据历史界面左侧时间列表栏中，每一条历史记录右侧都有一个回滚按钮，点击以后将弹出确认对话框，如果确认回滚的话将使用文件历史覆盖现有文件。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220501133017-3hecoih" data-type="NodeParagraph" class="p" id="20220501133017-3hecoih" updated="20220501133133"><div contenteditable="false" spellcheck="false">如果有非常多的文件需要回滚，建议手动在文件系统上复制。历史文件夹的内部结构和 data 内部结构一致，比如：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20220501133105-b25vi0a" data-type="NodeList" class="list" id="20220501133105-b25vi0a" updated="20220831210446"><div data-marker="*" data-subtype="u" data-node-id="20220501133105-kzow9y3" data-type="NodeListItem" class="li" id="20220501133105-kzow9y3" updated="20220501133105"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501133105-1dmg0zl" data-type="NodeParagraph" class="p" id="20220501133105-1dmg0zl" updated="20220501133105"><div contenteditable="false" spellcheck="false">笔记本删除：<span data-type="code">2022-05-01-091021-delete/20210808180117-czj9bvb/</span>，即 <span data-type="code">历史生成日期-{操作}/{笔记本 ID}/</span></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220501133105-ham1o5d" data-type="NodeListItem" class="li" id="20220501133105-ham1o5d" updated="20220501134003"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501133105-a1rwa0u" data-type="NodeParagraph" class="p" id="20220501133105-a1rwa0u" updated="20220501134003"><div contenteditable="false" spellcheck="false">文档删除：<span data-type="code">2022-05-01-091209-delete/20210808180117-czj9bvb/20200812220555-lj3enxa.sy</span>，即 <span data-type="code">历史生成日期-{操作}/{笔记本 ID}/{文档路径}</span></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220501133105-486vgy6" data-type="NodeListItem" class="li" id="20220501133105-486vgy6" updated="20220831210446"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501133105-jqnfpzv" data-type="NodeParagraph" class="p" id="20220501133105-jqnfpzv" updated="20220831210446"><div contenteditable="false" spellcheck="false">资源文件清理：<span data-type="code">2022-05-01-095621-clean/assets/image-20220501091157-qccp87e.png</span>，即 <span data-type="code">历史生成日期-{操作}/assets/{资源文件名}</span></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220501133041-w6ydfgw" data-type="NodeParagraph" class="p" id="20220501133041-w6ydfgw" updated="20220501133251"><div contenteditable="false" spellcheck="false">手动回滚操作步骤：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="o" data-node-id="20220501133237-il09opg" data-type="NodeList" class="list" id="20220501133237-il09opg" updated="20220615111149"><div data-marker="1." data-subtype="o" data-node-id="20220501133254-az0u30r" data-type="NodeListItem" class="li" updated="20220501133340" id="20220501133254-az0u30r"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">1.</div><div data-node-id="20220501133254-4ztj9yt" data-type="NodeParagraph" class="p" id="20220501133254-4ztj9yt" updated="20220501133340"><div contenteditable="false" spellcheck="false">退出思源，然后全量复制备份一下整个工作空间，避免后续误操作导致数据丢失</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="2." data-subtype="o" data-node-id="20220501133342-7fu44br" data-type="NodeListItem" class="li" updated="20220501133421" id="20220501133342-7fu44br"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">2.</div><div data-node-id="20220501133342-j92vqhx" data-type="NodeParagraph" class="p" id="20220501133342-j92vqhx" updated="20220501133421"><div contenteditable="false" spellcheck="false">进入 <span data-type="code">工作空间/history/</span> 文件夹，将 <span data-type="code">历史生成日期-{操作}</span> 文件夹下的数据直接复制到 data 文件夹进行覆盖</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="3." data-subtype="o" data-node-id="20220501133422-0nxnwc2" data-type="NodeListItem" class="li" id="20220501133422-0nxnwc2" updated="20220615111149"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">3.</div><div data-node-id="20220501133422-gc6qund" data-type="NodeParagraph" class="p" id="20220501133422-gc6qund" updated="20220615111149"><div contenteditable="false" spellcheck="false">启动思源后手动执行重建索引</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20220615115547-2fr6uej" data-type="NodeHeading" class="h3" id="20220615115547-2fr6uej" updated="20220615115551"><div contenteditable="false" spellcheck="false">清理文件历史</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220615115551-u75o5mk" data-type="NodeParagraph" class="p" id="20220615115551-u75o5mk" updated="20220615115618"><div contenteditable="false" spellcheck="false">默认自动保存最近 30 天生成的文件历史，可通过 <span data-type="kbd">设置</span> - <span data-type="kbd">编辑器</span> - <span data-type="kbd">历史保留天数</span> 进行调整，超过该期限的文件历史会被自动删除。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220615115625-3dx0t1j" data-type="NodeParagraph" class="p" updated="20220830230414" id="20220615115625-3dx0t1j"><div contenteditable="false" spellcheck="false">如果你想清空所有文件历史数据，可以点击 <span data-type="kbd">设置</span> - <span data-type="kbd">编辑器</span> - <span data-type="kbd">清空所有历史</span>，或者手动删除 <span data-type="code">工作空间/history/</span> 文件夹，然后在 <span data-type="kbd">文件历史</span> 中 <span data-type="kbd">重建索引</span>。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h2" data-node-id="20220615112531-5yos96d" data-type="NodeHeading" class="h2" id="20220615112531-5yos96d" updated="20220615112535"><div contenteditable="false" spellcheck="false">数据快照</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20220615113758-i2279ot" data-type="NodeHeading" class="h3" updated="20220615113939" id="20220615113758-i2279ot"><div contenteditable="false" spellcheck="false">初始化密钥</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220615113752-lbtlf6j" data-type="NodeParagraph" class="p" id="20220615113752-lbtlf6j" updated="20220615113952"><div contenteditable="false" spellcheck="false">第一次使用数据快照前需要在 <span data-type="kbd">设置</span> - <span data-type="kbd">关于</span> 中初始化 <span data-type="kbd">数据仓库密钥</span>。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220722001510-mtrrbj0" data-type="NodeParagraph" class="p" id="20220722001510-mtrrbj0" updated="20220722001555"><div contenteditable="false" spellcheck="false">初始化密钥有三种方式：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20220722001555-3wcanjb" data-type="NodeList" class="list" id="20220722001555-3wcanjb" updated="20220722001917"><div data-marker="*" data-subtype="u" data-node-id="20220722001556-sjm48yn" data-type="NodeListItem" class="li" id="20220722001556-sjm48yn" updated="20220722001556"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220722001556-8sc4mqb" data-type="NodeParagraph" class="p" id="20220722001556-8sc4mqb" updated="20220722001656"><div contenteditable="false" spellcheck="false"><span data-type="kbd">导入密钥</span>：将其他设备上的密钥字符串复制到此粘贴导入</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220722001657-79plg0z" data-type="NodeListItem" class="li" id="20220722001657-79plg0z"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220722001657-gh22p4n" data-type="NodeParagraph" class="p" id="20220722001657-gh22p4n" updated="20220722001831"><div contenteditable="false" spellcheck="false"><span data-type="kbd">自动生成密钥</span>：使用随机数生成密钥，该方式只需在一台设备上执行一次，其他设备使用 <span data-type="kbd">导入密钥</span></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220722001834-8kc1pdr" data-type="NodeListItem" class="li" id="20220722001834-8kc1pdr" updated="20220722001917"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220722001834-13o5rzz" data-type="NodeParagraph" class="p" id="20220722001834-13o5rzz" updated="20220722001917"><div contenteditable="false" spellcheck="false"><span data-type="kbd">通过密码生成密钥</span>：使用自定义的密码短语生成密钥，该方式需要在所有设备上都使用相同的密码短语</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220615113953-4o3uc9z" data-type="NodeParagraph" class="p" updated="20220722002029" id="20220615113953-4o3uc9z"><div contenteditable="false" spellcheck="false">总而言之，请务必保证所有设备都使用相同的密钥，否则数据快照将无法跨设备使用，比如无法通过云端同步数据快照。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20220615112535-k8n73hd" data-type="NodeHeading" class="h3" id="20220615112535-k8n73hd" updated="20220615113005"><div contenteditable="false" spellcheck="false">创建数据快照</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="o" data-node-id="20220615112933-zoh8iyg" data-type="NodeList" class="list" id="20220615112933-zoh8iyg" updated="20220625231649"><div data-marker="1." data-subtype="o" data-node-id="20220615114246-9or7h68" data-type="NodeListItem" class="li" id="20220615114246-9or7h68" updated="20220625231649"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">1.</div><div data-node-id="20220615114246-lr3ydl0" data-type="NodeParagraph" class="p" id="20220615114246-lr3ydl0" updated="20220625231649"><div contenteditable="false" spellcheck="false">点击顶部工具栏 <span data-type="kbd">数据历史</span> 按钮或者 <span data-type="kbd">Alt+H</span> 可打开数据历史界面</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="2." data-subtype="o" data-node-id="20220615114251-72kaaxr" data-type="NodeListItem" class="li" id="20220615114251-72kaaxr"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">2.</div><div data-node-id="20220615114251-2y9unt4" data-type="NodeParagraph" class="p" id="20220615114251-2y9unt4" updated="20220615114252"><div contenteditable="false" spellcheck="false">切换到最后一个页签 <span data-type="kbd">数据快照</span></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="3." data-subtype="o" data-node-id="20220615114253-k4a3tg5" data-type="NodeListItem" class="li" id="20220615114253-k4a3tg5" updated="20220615120214"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">3.</div><div data-node-id="20220615114253-70sfmtn" data-type="NodeParagraph" class="p" id="20220615114253-70sfmtn" updated="20220615120214"><div contenteditable="false" spellcheck="false">点击 <span data-type="kbd">创建快照</span>，填写 <span data-type="kbd">备注</span> 并确认</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220615114908-0y5tfv9" data-type="NodeParagraph" class="p" id="20220615114908-0y5tfv9" updated="20220615115114"><div contenteditable="false" spellcheck="false">浏览数据快照时只能通过快照创建时间和备注进行区别，所以备注信息应该尽量详细一些，以备后续能够准确识别不同的数据快照。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20220615114301-099icf4" data-type="NodeHeading" class="h3" id="20220615114301-099icf4" updated="20220615114632"><div contenteditable="false" spellcheck="false">浏览数据快照</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220615114706-5wy741l" data-type="NodeParagraph" class="p" id="20220615114706-5wy741l" updated="20220615115247"><div contenteditable="false" spellcheck="false">创建完数据快照后可以在左侧看到快照时间列表，点击不同快照以后可以浏览其备注。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20220615115212-kjebrv4" data-type="NodeHeading" class="h3" updated="20220615115226" id="20220615115212-kjebrv4"><div contenteditable="false" spellcheck="false">回滚数据快照</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220615115227-oxdlcxq" data-type="NodeParagraph" class="p" updated="20220615115452" id="20220615115227-oxdlcxq"><div contenteditable="false" spellcheck="false">在快照时间列表条目右侧都有一个回滚按钮，点击以后将弹出确认对话框，如果确认回滚的话将使用快照数据完全替换现有数据。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20220615115126-z62p36j" data-type="NodeHeading" class="h3" updated="20220615115532" id="20220615115126-z62p36j"><div contenteditable="false" spellcheck="false">清理数据快照</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20220615115758-ajl5l83" data-type="NodeList" class="list" id="20220615115758-ajl5l83" updated="20230422102226"><div data-marker="*" data-subtype="u" data-node-id="20230422101107-ihb3kxp" data-type="NodeListItem" class="li" id="20230422101107-ihb3kxp" updated="20230422102226"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422101107-zxq6qh2" data-type="NodeParagraph" class="p" id="20230422101107-zxq6qh2" updated="20230422102226"><div contenteditable="false" spellcheck="false">​<span data-type="kbd">设置</span>​ - <span data-type="kbd">关于</span>​ - <span data-type="kbd">数据仓库清理</span>​ 将删除所有未引用的快照和相关数据对象。“引用的快照”指的是 repo/refs/ 下指向的快照：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20230422101343-wvt2y4r" data-type="NodeList" class="list" id="20230422101343-wvt2y4r" updated="20230422101936"><div data-marker="*" data-subtype="u" data-node-id="20230422101343-obxopx6" data-type="NodeListItem" class="li" id="20230422101343-obxopx6" updated="20230422101934"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422101343-f5w2p8p" data-type="NodeParagraph" class="p" id="20230422101343-f5w2p8p" updated="20230422101934"><div contenteditable="false" spellcheck="false">​<span data-type="code">latest</span>​ 指向最新一个快照</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230422101357-4ugrbw1" data-type="NodeListItem" class="li" id="20230422101357-4ugrbw1" updated="20230422101936"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422101357-istm02i" data-type="NodeParagraph" class="p" updated="20230422101936" id="20230422101357-istm02i"><div contenteditable="false" spellcheck="false">​<span data-type="code">tags/*</span>​ 指向手动标记的快照</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230422101105-vdd9m4g" data-type="NodeListItem" class="li" id="20230422101105-vdd9m4g" updated="20230422101105"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422101105-0csmuf6" data-type="NodeParagraph" class="p" id="20230422101105-0csmuf6" updated="20230422101106"><div contenteditable="false" spellcheck="false">手动删除 <span data-type="code">工作空间/repo/</span>​​ 文件夹可以清空全部数据快照</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20210928094544-vg2c2ts" data-type="NodeHeading" class="h3" id="20210928094544-vg2c2ts" updated="20210928094608"><div contenteditable="false" spellcheck="false">忽略文件</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20210928094612-rymbb43" data-type="NodeParagraph" class="p" id="20210928094612-rymbb43" updated="20220708101301"><div contenteditable="false" spellcheck="false">如果需要在创建快照时忽略一些文件，请在文件系统上创建或编辑文本文件 <span data-type="code"> 工作空间/data/.siyuan/syncignore</span>， 其中每一行使用 data 文件夹的相对路径进行配置，表示忽略文件或文件夹的路径，支持通配符。例如：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20210928094821-syjcgbp" data-type="NodeList" class="list" id="20210928094821-syjcgbp" updated="20211222185741"><div data-marker="*" data-subtype="u" data-node-id="20210928094822-nn422ie" data-type="NodeListItem" class="li" id="20210928094822-nn422ie" updated="20211222185741"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20210928094822-ipyjn3n" data-type="NodeParagraph" class="p" id="20210928094822-ipyjn3n" updated="20211222185741"><div contenteditable="false" spellcheck="false"><span data-type="code">20210808180117-6v0mkxr/**/*</span>： 忽略 data/20210808180117-6v0mkxr 笔记本</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20210928095121-tyfox35" data-type="NodeListItem" class="li" id="20210928095121-tyfox35" updated="20210928095254"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20210928095121-tng5faj" data-type="NodeParagraph" class="p" id="20210928095121-tng5faj" updated="20210928095254"><div contenteditable="false" spellcheck="false"><span data-type="code">assets/*.pdf</span>：忽略 data/assets/ 下的 PDF 文件</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20220708101225-a2lxbp0" data-type="NodeHeading" class="h3" id="20220708101225-a2lxbp0" updated="20220807180307"><div contenteditable="false" spellcheck="false"><span data-type="tag">注意</span></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20220807180308-7hyw96s" data-type="NodeList" class="list" id="20220807180308-7hyw96s" updated="20220807180341"><div data-marker="*" data-subtype="u" data-node-id="20220807180328-2km55lx" data-type="NodeListItem" class="li" updated="20220807180341" id="20220807180328-2km55lx"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220807180328-x8lpi2n" data-type="NodeParagraph" class="p" id="20220807180328-x8lpi2n" updated="20220807180341"><div contenteditable="false" spellcheck="false">符号链接和隐藏文件不会被快照</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div></li>
<li><div data-subtype="h1" data-node-id="20230915114759-ftdbttb" data-type="NodeHeading" class="h1"><div contenteditable="false" spellcheck="false"><span id="footnotes-def-5"></span>数据同步</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h2" data-node-id="20230808120347-wx5cr4v" data-type="NodeHeading" class="h2" id="20230808120347-wx5cr4v" updated="20210721103911"><div contenteditable="false" spellcheck="false">概述</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20230808120347-q4v034g" data-type="NodeParagraph" class="p" id="20230808120347-q4v034g" updated="20210721103854"><div contenteditable="false" spellcheck="false">数据同步指的是在多个设备上保持 <span data-type="code">工作空间/data/</span> 文件夹数据一致，包括资源文件、模板、挂件以及笔记本数据。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h2" data-node-id="20230808120347-qbr56bx" data-type="NodeHeading" class="h2" id="20230808120347-qbr56bx" updated="20210721103758"><div contenteditable="false" spellcheck="false">使用方式</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20230808120347-2p4bc49" data-type="NodeParagraph" class="p" updated="20220821170632" id="20230808120347-2p4bc49"><div contenteditable="false" spellcheck="false">初始化数据仓库密钥<sup class="footnotes-ref" id="footnotes-ref-6"><a href="#footnotes-def-6">6</a></sup>后如果一切正常就已经配置好同步了。如果你不太熟悉同步配置，建议通过点击同步按钮打开同步配置向导，通过向导进行配置会更简便一些。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20230808120347-n3vxtba" data-type="NodeList" class="list" id="20230808120347-n3vxtba" updated="20220708101339"><div data-marker="*" data-subtype="u" data-node-id="20230808120347-kmv8g3m" data-type="NodeListItem" class="li" id="20230808120347-kmv8g3m" updated="20220708101329"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-mthf707" data-type="NodeParagraph" class="p" id="20230808120347-mthf707" updated="20220708101330"><div contenteditable="false" spellcheck="false">如果需要暂停同步，可关闭选项 <span data-type="kbd">设置</span> - <span data-type="kbd">云端</span> - <span data-type="kbd">启用云端同步</span></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230808120347-2m0pkdb" data-type="NodeListItem" class="li" id="20230808120347-2m0pkdb" updated="20220708101339"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-cslq6vc" data-type="NodeParagraph" class="p" id="20230808120347-cslq6vc" updated="20220708101339"><div contenteditable="false" spellcheck="false">忽略文件<sup class="footnotes-ref" id="footnotes-ref-7"><a href="#footnotes-def-7">7</a></sup></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20230808120347-qytpdxh" data-type="NodeParagraph" class="p" id="20230808120347-qytpdxh" updated="20220831004438"><div contenteditable="false" spellcheck="false">​<span data-type="tag">注意</span>​​：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20230808120347-y41kxh2" data-type="NodeList" class="list" id="20230808120347-y41kxh2" updated="20230220103623"><div data-marker="*" data-subtype="u" data-node-id="20230808120347-xthfmk7" data-type="NodeListItem" class="li" id="20230808120347-xthfmk7" updated="20230220103623"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-p3dn7n3" data-type="NodeParagraph" class="p" id="20230808120347-p3dn7n3" updated="20230220103623"><div contenteditable="false" spellcheck="false">启用同步前，请确保参与同步的所有设备系统时间一致</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230808120347-3l72g5v" data-type="NodeListItem" class="li" id="20230808120347-3l72g5v" updated="20230220103538"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-4mlag9e" data-type="NodeParagraph" class="p" id="20230808120347-4mlag9e" updated="20230220103539"><div contenteditable="false" spellcheck="false">如果数据量较大，建议通过设置中的 <span data-type="kbd">导出 - Data</span>​ 导出数据包，然后将该数据包通过手动拷贝或者其他方式发送到新设备上，并在新设备上 <span data-type="kbd">导入 - Data</span>​，最后再配置同步</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h2" data-node-id="20230808120347-buiv5yn" data-type="NodeHeading" class="h2" id="20230808120347-buiv5yn" updated="20230219120246"><div contenteditable="false" spellcheck="false">同步模式</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20230808120347-fwrmpx3" data-type="NodeParagraph" class="p" id="20230808120347-fwrmpx3" updated="20230219120420"><div contenteditable="false" spellcheck="false">在 <span data-type="kbd">设置</span>​ - <span data-type="kbd">云端</span>​ - <span data-type="kbd">云端同步模式</span>​ 中支持三种同步模式：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20230808120347-amosggq" data-type="NodeList" class="list" id="20230808120347-amosggq" updated="20230219121049"><div data-marker="*" data-subtype="u" data-node-id="20230808120347-7xxyobg" data-type="NodeListItem" class="li" id="20230808120347-7xxyobg" updated="20230219121045"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-nwozegn" data-type="NodeParagraph" class="p" id="20230808120347-nwozegn" updated="20230219121007"><div contenteditable="false" spellcheck="false">自动同步</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20230808120347-l1b7vtd" data-type="NodeList" class="list" id="20230808120347-l1b7vtd" updated="20230219121045"><div data-marker="*" data-subtype="u" data-node-id="20230808120347-7yo5dux" data-type="NodeListItem" class="li" id="20230808120347-7yo5dux"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-33fgevw" data-type="NodeParagraph" class="p" id="20230808120347-33fgevw"><div contenteditable="false" spellcheck="false">启动和退出时会进行一次同步，使用中数据不再变动后 30 秒进行一次同步</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230808120347-k9w4s4e" data-type="NodeListItem" class="li" updated="20230219121045" id="20230808120347-k9w4s4e"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-tixrpss" data-type="NodeParagraph" class="p" id="20230808120347-tixrpss" updated="20230219121045"><div contenteditable="false" spellcheck="false">由同步算法决定数据合并和覆盖，请参考下述工作原理介绍</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230808120347-vzxk1jz" data-type="NodeListItem" class="li" updated="20230219121049" id="20230808120347-vzxk1jz"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-1gxchhr" data-type="NodeParagraph" class="p" id="20230808120347-1gxchhr" updated="20230219120922"><div contenteditable="false" spellcheck="false">手动同步</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20230808120347-no67dio" data-type="NodeList" class="list" id="20230808120347-no67dio" updated="20230219121049"><div data-marker="*" data-subtype="u" data-node-id="20230808120347-5cx2eby" data-type="NodeListItem" class="li" id="20230808120347-5cx2eby"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-1wfzyl4" data-type="NodeParagraph" class="p" id="20230808120347-1wfzyl4" updated="20230219120927"><div contenteditable="false" spellcheck="false">仅启动和退出时进行一次同步，使用中需要手动触发同步</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230808120347-gq4mmhp" data-type="NodeListItem" class="li" id="20230808120347-gq4mmhp" updated="20230219121049"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-zsvwvg9" data-type="NodeParagraph" class="p" id="20230808120347-zsvwvg9" updated="20230219121049"><div contenteditable="false" spellcheck="false">由同步算法决定数据合并和覆盖，请参考下述工作原理介绍</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230808120347-mzynq44" data-type="NodeListItem" class="li" id="20230808120347-mzynq44"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-zlxogea" data-type="NodeParagraph" class="p" id="20230808120347-zlxogea" updated="20230219120848"><div contenteditable="false" spellcheck="false">完全手动同步：启动和退出时均不同步，完全手动控制同步时机和同步方向</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h2" data-node-id="20230808120347-lptnyvq" data-type="NodeHeading" class="h2" id="20230808120347-lptnyvq" updated="20230219121525"><div contenteditable="false" spellcheck="false">自动/手动同步模式工作原理</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20230808120347-o64blc2" data-type="NodeParagraph" class="p" id="20230808120347-o64blc2" updated="20220703225614"><div contenteditable="false" spellcheck="false">思源通过对比云端数据快照和本地数据快照进行相应操作：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20230808120347-j4bqb3a" data-type="NodeList" class="list" id="20230808120347-j4bqb3a" updated="20220703230810"><div data-marker="*" data-subtype="u" data-node-id="20230808120347-7uvkzsb" data-type="NodeListItem" class="li" id="20230808120347-7uvkzsb" updated="20210901163356"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-dx8pr4f" data-type="NodeParagraph" class="p" id="20230808120347-dx8pr4f" updated="20220703230507"><div contenteditable="false" spellcheck="false">如果快照相同则忽略本次同步</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230808120347-pvyr15g" data-type="NodeListItem" class="li" id="20230808120347-pvyr15g" updated="20220703230810"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-5e92ogb" data-type="NodeParagraph" class="p" id="20230808120347-5e92ogb" updated="20220703230630"><div contenteditable="false" spellcheck="false">如果快照不同，则将本地距离上次同步的变更上传到云端，将云端最新的变更合并到本地</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20230808120347-vb1ee0l" data-type="NodeList" class="list" id="20230808120347-vb1ee0l" updated="20220703230810"><div data-marker="*" data-subtype="u" data-node-id="20230808120347-fbsghqb" data-type="NodeListItem" class="li" id="20230808120347-fbsghqb"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-cvefpca" data-type="NodeParagraph" class="p" id="20230808120347-cvefpca" updated="20220703230650"><div contenteditable="false" spellcheck="false">如果两端的变更没有冲突则直接合并</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230808120347-7p8pzdq" data-type="NodeListItem" class="li" id="20230808120347-7p8pzdq" updated="20220703230810"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-t5n8fkj" data-type="NodeParagraph" class="p" id="20230808120347-t5n8fkj" updated="20220703230810"><div contenteditable="false" spellcheck="false">如果存在文件冲突，则以本地为准覆盖云端，同时拉取到的云端冲突文件会归入到数据历史中</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20230808120347-piwm6s0" data-type="NodeParagraph" class="p" id="20230808120347-piwm6s0" updated="20230219121719"><div contenteditable="false" spellcheck="false">自动同步时间间隔算法描述如下：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20230808120347-3afa1j8" data-type="NodeList" class="list" id="20230808120347-3afa1j8" updated="20220510104801"><div data-marker="*" data-subtype="u" data-node-id="20230808120347-9gjv9e4" data-type="NodeListItem" class="li" id="20230808120347-9gjv9e4" updated="20220510104612"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-sx4xflq" data-type="NodeParagraph" class="p" updated="20220510104612" id="20230808120347-sx4xflq"><div contenteditable="false" spellcheck="false">数据变动后 30 秒如果不再发生变动则进行一次对比，如果继续发生变动则顺延 30 秒</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230808120347-uu8mf5z" data-type="NodeListItem" class="li" id="20230808120347-uu8mf5z" updated="20220510104801"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-tm5aosj" data-type="NodeParagraph" class="p" id="20230808120347-tm5aosj" updated="20220510104801"><div contenteditable="false" spellcheck="false">没有数据变动则按 5 分钟、8 分钟、16 分钟、32 分钟……递增间隔</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h2" data-node-id="20230808120347-w8dfrmf" data-type="NodeHeading" class="h2" id="20230808120347-w8dfrmf" updated="20230219120510"><div contenteditable="false" spellcheck="false">自动同步模式场景例举</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20230808120347-92sa9pr" data-type="NodeParagraph" class="p" id="20230808120347-92sa9pr" updated="20220307094844"><div contenteditable="false" spellcheck="false">从上述工作原理我们可以得知，思源仅支持在多设备上交替同步数据：设备 A 上同步完成以后设备 B 上再进行同步。无法支持多设备同时同步，这样会发生无法预期的数据覆盖。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20230808120347-dec0dhv" data-type="NodeHeading" class="h3" id="20230808120347-dec0dhv" updated="20220307092705"><div contenteditable="false" spellcheck="false">正常场景</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="o" data-node-id="20230808120347-0t8dl3b" data-type="NodeList" class="list" id="20230808120347-0t8dl3b" updated="20220307093834"><div data-marker="1." data-subtype="o" data-node-id="20230808120347-hoyv0c6" data-type="NodeListItem" class="li" id="20230808120347-hoyv0c6"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">1.</div><div data-node-id="20230808120347-pnaqfwp" data-type="NodeParagraph" class="p" id="20230808120347-pnaqfwp" updated="20220307093526"><div contenteditable="false" spellcheck="false">在设备 A 上编辑后执行同步（通过自动或者手动触发同步），此时云端数据会被设备 A 数据覆盖，既云端和设备 A 保持数据一致</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="2." data-subtype="o" data-node-id="20230808120347-f6n68f0" data-type="NodeListItem" class="li" id="20230808120347-f6n68f0"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">2.</div><div data-node-id="20230808120347-r17i3kh" data-type="NodeParagraph" class="p" updated="20220307093637" id="20230808120347-r17i3kh"><div contenteditable="false" spellcheck="false">在设备 B 上执行同步，此时设备 B 数据会被云端数据覆盖，即云端和设备 A、B 保持数据一致</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="3." data-subtype="o" data-node-id="20230808120347-8r0pu6k" data-type="NodeListItem" class="li" id="20230808120347-8r0pu6k"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">3.</div><div data-node-id="20230808120347-cxnduxx" data-type="NodeParagraph" class="p" id="20230808120347-cxnduxx" updated="20220307093705"><div contenteditable="false" spellcheck="false">设备 B 上编辑后再次执行同步，此时云端数据会被设备 B 数据覆盖，既云端和设备 B 保持数据一致</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="4." data-subtype="o" data-node-id="20230808120347-x5cb7aq" data-type="NodeListItem" class="li" id="20230808120347-x5cb7aq" updated="20220307093834"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">4.</div><div data-node-id="20230808120347-099ii2x" data-type="NodeParagraph" class="p" id="20230808120347-099ii2x" updated="20220307093834"><div contenteditable="false" spellcheck="false">在设备 A 上执行同步，此时设备 A 数据会被云端数据覆盖，即云端和设备 A、B 保持数据一致</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20230808120347-5crduzj" data-type="NodeParagraph" class="p" id="20230808120347-5crduzj" updated="20220307093342"><div contenteditable="false" spellcheck="false">该场景下，使用同步的过程是在设备 A、B 上交替进行的，这样能够保证数据同步符合预期正常完成。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20230808120347-2ir9q3j" data-type="NodeHeading" class="h3" id="20230808120347-2ir9q3j" updated="20220703231010"><div contenteditable="false" spellcheck="false">冲突场景</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="o" data-node-id="20230808120347-7b58yr8" data-type="NodeList" class="list" id="20230808120347-7b58yr8" updated="20221009104351"><div data-marker="1." data-subtype="o" data-node-id="20230808120347-8zop0b9" data-type="NodeListItem" class="li" id="20230808120347-8zop0b9"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">1.</div><div data-node-id="20230808120347-mhivq6o" data-type="NodeParagraph" class="p" id="20230808120347-mhivq6o" updated="20220703231043"><div contenteditable="false" spellcheck="false">在设备 A 上编辑 a 文件后同步</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="2." data-subtype="o" data-node-id="20230808120347-drznd8r" data-type="NodeListItem" class="li" id="20230808120347-drznd8r" updated="20220703231050"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">2.</div><div data-node-id="20230808120347-s36sg66" data-type="NodeParagraph" class="p" id="20230808120347-s36sg66" updated="20220703231050"><div contenteditable="false" spellcheck="false">在设备 B 上编辑 a 文件后同步</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="3." data-subtype="o" data-node-id="20230808120347-msh8db8" data-type="NodeListItem" class="li" id="20230808120347-msh8db8" updated="20221009104351"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">3.</div><div data-node-id="20230808120347-vbx3gpm" data-type="NodeParagraph" class="p" updated="20221009104351" id="20230808120347-vbx3gpm"><div contenteditable="false" spellcheck="false">此时云端 a 文件会被 B 设备上的 a 覆盖，同时在 B 设备上生成之前 A 设备 a 的历史</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h2" data-node-id="20230808120347-yy5m46r" data-type="NodeHeading" class="h2" id="20230808120347-yy5m46r" updated="20220307092835"><div contenteditable="false" spellcheck="false"><span data-type="tag">注意</span></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20230808120347-um16u4f" data-type="NodeList" class="list" id="20230808120347-um16u4f" updated="20220807180028"><div data-marker="*" data-subtype="u" data-node-id="20230808120347-5j8ihgi" data-type="NodeListItem" class="li" id="20230808120347-5j8ihgi" updated="20220420100248"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-fr63cm5" data-type="NodeParagraph" class="p" id="20230808120347-fr63cm5" updated="20220420100248"><div contenteditable="false" spellcheck="false">睡眠或关机等突然断网的情况下不会触发同步，请手动点击同步按钮进行同步</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230808120347-sampfbn" data-type="NodeListItem" class="li" id="20230808120347-sampfbn" updated="20210721160123"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-ibgzf8o" data-type="NodeParagraph" class="p" id="20230808120347-ibgzf8o" updated="20210721160123"><div contenteditable="false" spellcheck="false">请勿同时使用第三方同步盘和思源同步，可能会导致数据损坏</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230808120347-g4y6u9o" data-type="NodeListItem" class="li" id="20230808120347-g4y6u9o" updated="20220807180028"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230808120347-rbe32cd" data-type="NodeParagraph" class="p" id="20230808120347-rbe32cd" updated="20220807180028"><div contenteditable="false" spellcheck="false">符号链接和隐藏文件不会被同步</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div></li>
<li><div data-subtype="h3" data-node-id="20220615113758-i2279ot" data-type="NodeHeading" class="h3" id="20220615113758-i2279ot" updated="20220615113939"><div contenteditable="false" spellcheck="false"><span id="footnotes-def-6"></span>初始化密钥</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220615113752-lbtlf6j" data-type="NodeParagraph" class="p" id="20220615113752-lbtlf6j" updated="20220615113952"><div contenteditable="false" spellcheck="false">第一次使用数据快照前需要在 <span data-type="kbd">设置</span> - <span data-type="kbd">关于</span> 中初始化 <span data-type="kbd">数据仓库密钥</span>。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220722001510-mtrrbj0" data-type="NodeParagraph" class="p" id="20220722001510-mtrrbj0" updated="20220722001555"><div contenteditable="false" spellcheck="false">初始化密钥有三种方式：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20220722001555-3wcanjb" data-type="NodeList" class="list" id="20220722001555-3wcanjb" updated="20220722001917"><div data-marker="*" data-subtype="u" data-node-id="20220722001556-sjm48yn" data-type="NodeListItem" class="li" id="20220722001556-sjm48yn" updated="20220722001556"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220722001556-8sc4mqb" data-type="NodeParagraph" class="p" id="20220722001556-8sc4mqb" updated="20220722001656"><div contenteditable="false" spellcheck="false"><span data-type="kbd">导入密钥</span>：将其他设备上的密钥字符串复制到此粘贴导入</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220722001657-79plg0z" data-type="NodeListItem" class="li" id="20220722001657-79plg0z"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220722001657-gh22p4n" data-type="NodeParagraph" class="p" id="20220722001657-gh22p4n" updated="20220722001831"><div contenteditable="false" spellcheck="false"><span data-type="kbd">自动生成密钥</span>：使用随机数生成密钥，该方式只需在一台设备上执行一次，其他设备使用 <span data-type="kbd">导入密钥</span></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220722001834-8kc1pdr" data-type="NodeListItem" class="li" updated="20220722001917" id="20220722001834-8kc1pdr"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220722001834-13o5rzz" data-type="NodeParagraph" class="p" id="20220722001834-13o5rzz" updated="20220722001917"><div contenteditable="false" spellcheck="false"><span data-type="kbd">通过密码生成密钥</span>：使用自定义的密码短语生成密钥，该方式需要在所有设备上都使用相同的密码短语</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220615113953-4o3uc9z" data-type="NodeParagraph" class="p" id="20220615113953-4o3uc9z" updated="20220722002029"><div contenteditable="false" spellcheck="false">总而言之，请务必保证所有设备都使用相同的密钥，否则数据快照将无法跨设备使用，比如无法通过云端同步数据快照。</div><div class="protyle-attr" contenteditable="false"></div></div></li>
<li><div data-subtype="h3" data-node-id="20210928094544-vg2c2ts" data-type="NodeHeading" class="h3" id="20210928094544-vg2c2ts" updated="20210928094608"><div contenteditable="false" spellcheck="false"><span id="footnotes-def-7"></span>忽略文件</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20210928094612-rymbb43" data-type="NodeParagraph" class="p" id="20210928094612-rymbb43" updated="20220708101301"><div contenteditable="false" spellcheck="false">如果需要在创建快照时忽略一些文件，请在文件系统上创建或编辑文本文件 <span data-type="code"> 工作空间/data/.siyuan/syncignore</span>， 其中每一行使用 data 文件夹的相对路径进行配置，表示忽略文件或文件夹的路径，支持通配符。例如：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20210928094821-syjcgbp" data-type="NodeList" class="list" id="20210928094821-syjcgbp" updated="20211222185741"><div data-marker="*" data-subtype="u" data-node-id="20210928094822-nn422ie" data-type="NodeListItem" class="li" id="20210928094822-nn422ie" updated="20211222185741"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20210928094822-ipyjn3n" data-type="NodeParagraph" class="p" id="20210928094822-ipyjn3n" updated="20211222185741"><div contenteditable="false" spellcheck="false"><span data-type="code">20210808180117-6v0mkxr/**/*</span>： 忽略 data/20210808180117-6v0mkxr 笔记本</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20210928095121-tyfox35" data-type="NodeListItem" class="li" id="20210928095121-tyfox35" updated="20210928095254"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20210928095121-tng5faj" data-type="NodeParagraph" class="p" id="20210928095121-tng5faj" updated="20210928095254"><div contenteditable="false" spellcheck="false"><span data-type="code">assets/*.pdf</span>：忽略 data/assets/ 下的 PDF 文件</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div></li>
<li><div data-subtype="h2" data-node-id="20220615112531-5yos96d" data-type="NodeHeading" class="h2" id="20220615112531-5yos96d" updated="20220615112535"><div contenteditable="false" spellcheck="false"><span id="footnotes-def-8"></span>数据快照</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20220615113758-i2279ot" data-type="NodeHeading" class="h3" id="20220615113758-i2279ot" updated="20220615113939"><div contenteditable="false" spellcheck="false">初始化密钥</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220615113752-lbtlf6j" data-type="NodeParagraph" class="p" id="20220615113752-lbtlf6j" updated="20220615113952"><div contenteditable="false" spellcheck="false">第一次使用数据快照前需要在 <span data-type="kbd">设置</span> - <span data-type="kbd">关于</span> 中初始化 <span data-type="kbd">数据仓库密钥</span>。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220722001510-mtrrbj0" data-type="NodeParagraph" class="p" id="20220722001510-mtrrbj0" updated="20220722001555"><div contenteditable="false" spellcheck="false">初始化密钥有三种方式：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20220722001555-3wcanjb" data-type="NodeList" class="list" updated="20220722001917" id="20220722001555-3wcanjb"><div data-marker="*" data-subtype="u" data-node-id="20220722001556-sjm48yn" data-type="NodeListItem" class="li" id="20220722001556-sjm48yn" updated="20220722001556"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220722001556-8sc4mqb" data-type="NodeParagraph" class="p" id="20220722001556-8sc4mqb" updated="20220722001656"><div contenteditable="false" spellcheck="false"><span data-type="kbd">导入密钥</span>：将其他设备上的密钥字符串复制到此粘贴导入</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220722001657-79plg0z" data-type="NodeListItem" class="li" id="20220722001657-79plg0z"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220722001657-gh22p4n" data-type="NodeParagraph" class="p" id="20220722001657-gh22p4n" updated="20220722001831"><div contenteditable="false" spellcheck="false"><span data-type="kbd">自动生成密钥</span>：使用随机数生成密钥，该方式只需在一台设备上执行一次，其他设备使用 <span data-type="kbd">导入密钥</span></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20220722001834-8kc1pdr" data-type="NodeListItem" class="li" id="20220722001834-8kc1pdr" updated="20220722001917"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220722001834-13o5rzz" data-type="NodeParagraph" class="p" id="20220722001834-13o5rzz" updated="20220722001917"><div contenteditable="false" spellcheck="false"><span data-type="kbd">通过密码生成密钥</span>：使用自定义的密码短语生成密钥，该方式需要在所有设备上都使用相同的密码短语</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220615113953-4o3uc9z" data-type="NodeParagraph" class="p" updated="20220722002029" id="20220615113953-4o3uc9z"><div contenteditable="false" spellcheck="false">总而言之，请务必保证所有设备都使用相同的密钥，否则数据快照将无法跨设备使用，比如无法通过云端同步数据快照。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20220615112535-k8n73hd" data-type="NodeHeading" class="h3" id="20220615112535-k8n73hd" updated="20220615113005"><div contenteditable="false" spellcheck="false">创建数据快照</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="o" data-node-id="20220615112933-zoh8iyg" data-type="NodeList" class="list" id="20220615112933-zoh8iyg" updated="20220625231649"><div data-marker="1." data-subtype="o" data-node-id="20220615114246-9or7h68" data-type="NodeListItem" class="li" id="20220615114246-9or7h68" updated="20220625231649"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">1.</div><div data-node-id="20220615114246-lr3ydl0" data-type="NodeParagraph" class="p" updated="20220625231649" id="20220615114246-lr3ydl0"><div contenteditable="false" spellcheck="false">点击顶部工具栏 <span data-type="kbd">数据历史</span> 按钮或者 <span data-type="kbd">Alt+H</span> 可打开数据历史界面</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="2." data-subtype="o" data-node-id="20220615114251-72kaaxr" data-type="NodeListItem" class="li" id="20220615114251-72kaaxr"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">2.</div><div data-node-id="20220615114251-2y9unt4" data-type="NodeParagraph" class="p" id="20220615114251-2y9unt4" updated="20220615114252"><div contenteditable="false" spellcheck="false">切换到最后一个页签 <span data-type="kbd">数据快照</span></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="3." data-subtype="o" data-node-id="20220615114253-k4a3tg5" data-type="NodeListItem" class="li" id="20220615114253-k4a3tg5" updated="20220615120214"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">3.</div><div data-node-id="20220615114253-70sfmtn" data-type="NodeParagraph" class="p" id="20220615114253-70sfmtn" updated="20220615120214"><div contenteditable="false" spellcheck="false">点击 <span data-type="kbd">创建快照</span>，填写 <span data-type="kbd">备注</span> 并确认</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220615114908-0y5tfv9" data-type="NodeParagraph" class="p" id="20220615114908-0y5tfv9" updated="20220615115114"><div contenteditable="false" spellcheck="false">浏览数据快照时只能通过快照创建时间和备注进行区别，所以备注信息应该尽量详细一些，以备后续能够准确识别不同的数据快照。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20220615114301-099icf4" data-type="NodeHeading" class="h3" id="20220615114301-099icf4" updated="20220615114632"><div contenteditable="false" spellcheck="false">浏览数据快照</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220615114706-5wy741l" data-type="NodeParagraph" class="p" id="20220615114706-5wy741l" updated="20220615115247"><div contenteditable="false" spellcheck="false">创建完数据快照后可以在左侧看到快照时间列表，点击不同快照以后可以浏览其备注。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20220615115212-kjebrv4" data-type="NodeHeading" class="h3" id="20220615115212-kjebrv4" updated="20220615115226"><div contenteditable="false" spellcheck="false">回滚数据快照</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20220615115227-oxdlcxq" data-type="NodeParagraph" class="p" id="20220615115227-oxdlcxq" updated="20220615115452"><div contenteditable="false" spellcheck="false">在快照时间列表条目右侧都有一个回滚按钮，点击以后将弹出确认对话框，如果确认回滚的话将使用快照数据完全替换现有数据。</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20220615115126-z62p36j" data-type="NodeHeading" class="h3" id="20220615115126-z62p36j" updated="20220615115532"><div contenteditable="false" spellcheck="false">清理数据快照</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20220615115758-ajl5l83" data-type="NodeList" class="list" id="20220615115758-ajl5l83" updated="20230422102226"><div data-marker="*" data-subtype="u" data-node-id="20230422101107-ihb3kxp" data-type="NodeListItem" class="li" id="20230422101107-ihb3kxp" updated="20230422102226"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422101107-zxq6qh2" data-type="NodeParagraph" class="p" id="20230422101107-zxq6qh2" updated="20230422102226"><div contenteditable="false" spellcheck="false">​<span data-type="kbd">设置</span>​ - <span data-type="kbd">关于</span>​ - <span data-type="kbd">数据仓库清理</span>​ 将删除所有未引用的快照和相关数据对象。“引用的快照”指的是 repo/refs/ 下指向的快照：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20230422101343-wvt2y4r" data-type="NodeList" class="list" id="20230422101343-wvt2y4r" updated="20230422101936"><div data-marker="*" data-subtype="u" data-node-id="20230422101343-obxopx6" data-type="NodeListItem" class="li" id="20230422101343-obxopx6" updated="20230422101934"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422101343-f5w2p8p" data-type="NodeParagraph" class="p" id="20230422101343-f5w2p8p" updated="20230422101934"><div contenteditable="false" spellcheck="false">​<span data-type="code">latest</span>​ 指向最新一个快照</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230422101357-4ugrbw1" data-type="NodeListItem" class="li" id="20230422101357-4ugrbw1" updated="20230422101936"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422101357-istm02i" data-type="NodeParagraph" class="p" id="20230422101357-istm02i" updated="20230422101936"><div contenteditable="false" spellcheck="false">​<span data-type="code">tags/*</span>​ 指向手动标记的快照</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20230422101105-vdd9m4g" data-type="NodeListItem" class="li" id="20230422101105-vdd9m4g" updated="20230422101105"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230422101105-0csmuf6" data-type="NodeParagraph" class="p" id="20230422101105-0csmuf6" updated="20230422101106"><div contenteditable="false" spellcheck="false">手动删除 <span data-type="code">工作空间/repo/</span>​​ 文件夹可以清空全部数据快照</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20210928094544-vg2c2ts" data-type="NodeHeading" class="h3" updated="20210928094608" id="20210928094544-vg2c2ts"><div contenteditable="false" spellcheck="false">忽略文件</div><div class="protyle-attr" contenteditable="false"></div></div><div data-node-id="20210928094612-rymbb43" data-type="NodeParagraph" class="p" id="20210928094612-rymbb43" updated="20220708101301"><div contenteditable="false" spellcheck="false">如果需要在创建快照时忽略一些文件，请在文件系统上创建或编辑文本文件 <span data-type="code"> 工作空间/data/.siyuan/syncignore</span>， 其中每一行使用 data 文件夹的相对路径进行配置，表示忽略文件或文件夹的路径，支持通配符。例如：</div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20210928094821-syjcgbp" data-type="NodeList" class="list" id="20210928094821-syjcgbp" updated="20211222185741"><div data-marker="*" data-subtype="u" data-node-id="20210928094822-nn422ie" data-type="NodeListItem" class="li" id="20210928094822-nn422ie" updated="20211222185741"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20210928094822-ipyjn3n" data-type="NodeParagraph" class="p" id="20210928094822-ipyjn3n" updated="20211222185741"><div contenteditable="false" spellcheck="false"><span data-type="code">20210808180117-6v0mkxr/**/*</span>： 忽略 data/20210808180117-6v0mkxr 笔记本</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-marker="*" data-subtype="u" data-node-id="20210928095121-tyfox35" data-type="NodeListItem" class="li" id="20210928095121-tyfox35" updated="20210928095254"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20210928095121-tng5faj" data-type="NodeParagraph" class="p" id="20210928095121-tng5faj" updated="20210928095254"><div contenteditable="false" spellcheck="false"><span data-type="code">assets/*.pdf</span>：忽略 data/assets/ 下的 PDF 文件</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="h3" data-node-id="20220708101225-a2lxbp0" data-type="NodeHeading" class="h3" id="20220708101225-a2lxbp0" updated="20220807180307"><div contenteditable="false" spellcheck="false"><span data-type="tag">注意</span></div><div class="protyle-attr" contenteditable="false"></div></div><div data-subtype="u" data-node-id="20220807180308-7hyw96s" data-type="NodeList" class="list" id="20220807180308-7hyw96s" updated="20220807180341"><div data-marker="*" data-subtype="u" data-node-id="20220807180328-2km55lx" data-type="NodeListItem" class="li" updated="20220807180341" id="20220807180328-2km55lx"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220807180328-x8lpi2n" data-type="NodeParagraph" class="p" id="20220807180328-x8lpi2n" updated="20220807180341"><div contenteditable="false" spellcheck="false">符号链接和隐藏文件不会被快照</div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div><div class="protyle-attr" contenteditable="false"></div></div></li>
</ol></div>
        </div>
        <script src="../appearance/icons/material/icon.js?2.10.5"></script>
        <script src="../stage/build/export/protyle-method.js?2.10.5"></script>
        <script src="../stage/protyle/js/lute/lute.min.js?2.10.5"></script>
        <script>
          window.siyuan = {
            config: {
              appearance: { mode: 0, codeBlockThemeDark: "base16/dracula", codeBlockThemeLight: "github" },
              editor: {
                codeLineWrap: true,
                codeLigatures: false,
                plantUMLServePath: "https://www.plantuml.com/plantuml/svg/~1",
                codeSyntaxHighlightLineNum: true,
                katexMacros: JSON.stringify({}),
              },
            },
            languages: { copy: "复制" },
          };
          const previewElement = document.getElementById("preview");
          Protyle.highlightRender(previewElement, "../stage/protyle");
          Protyle.mathRender(previewElement, "../stage/protyle", false);
          Protyle.mermaidRender(previewElement, "../stage/protyle");
          Protyle.flowchartRender(previewElement, "../stage/protyle");
          Protyle.graphvizRender(previewElement, "../stage/protyle");
          Protyle.chartRender(previewElement, "../stage/protyle");
          Protyle.mindmapRender(previewElement, "../stage/protyle");
          Protyle.abcRender(previewElement, "../stage/protyle");
          Protyle.htmlRender(previewElement);
          Protyle.plantumlRender(previewElement, "../stage/protyle");
          document.querySelectorAll(".protyle-action__copy").forEach((item) => {
            item.addEventListener("click", (event) => {
              navigator.clipboard.writeText(item.parentElement.nextElementSibling.textContent.trimEnd());
              event.preventDefault();
              event.stopPropagation();
            });
          });
        </script>
      </body>
    </html>