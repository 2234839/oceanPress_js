<!DOCTYPE html>
    <html lang="zh_CN" data-theme-mode="light" data-light-theme="daylight" data-dark-theme="midnight">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="mobile-web-app-capable" content="yes"/>
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="stylesheet" type="text/css" id="baseStyle" href="../../stage/build/export/base.css?2.10.2"/>
        <link rel="stylesheet" type="text/css" id="themeDefaultStyle" href="../../appearance/themes/daylight/theme.css?2.10.2"/>

        <title>数据历史</title>
        <style>
            body {background-color: var(--b3-theme-background);color: var(--b3-theme-on-background)}
            .b3-typography, .protyle-wysiwyg, .protyle-title {font-size:16px !important}
            .b3-typography code:not(.hljs), .protyle-wysiwyg span[data-type~=code] { font-variant-ligatures: none }
            .li > .protyle-action {height:34px;line-height: 34px}
            .protyle-wysiwyg [data-node-id].li > .protyle-action ~ .h1, .protyle-wysiwyg [data-node-id].li > .protyle-action ~ .h2, .protyle-wysiwyg [data-node-id].li > .protyle-action ~ .h3, .protyle-wysiwyg [data-node-id].li > .protyle-action ~ .h4, .protyle-wysiwyg [data-node-id].li > .protyle-action ~ .h5, .protyle-wysiwyg [data-node-id].li > .protyle-action ~ .h6 {line-height:34px;}
            .protyle-wysiwyg [data-node-id].li > .protyle-action:after {height: 16px;width: 16px;margin:-8px 0 0 -8px}
            .protyle-wysiwyg [data-node-id].li > .protyle-action svg {height: 14px}
            .protyle-wysiwyg [data-node-id].li:before {height: calc(100% - 34px);top:34px}
            .protyle-wysiwyg [data-node-id] [spellcheck] {min-height:26px;}
            .protyle-wysiwyg [data-node-id] {}
            .protyle-wysiwyg .li {min-height:34px}
            .protyle-gutters button svg {height:26px}
            .protyle-wysiwyg img.emoji, .b3-typography img.emoji {width:18px}
            .protyle-wysiwyg .h1 img.emoji, .b3-typography h1 img.emoji {width:35px}
            .protyle-wysiwyg .h2 img.emoji, .b3-typography h2 img.emoji {width:31px}
            .protyle-wysiwyg .h3 img.emoji, .b3-typography h3 img.emoji {width:27px}
            .protyle-wysiwyg .h4 img.emoji, .b3-typography h4 img.emoji {width:25px}
            .protyle-wysiwyg .h5 img.emoji, .b3-typography h5 img.emoji {width:22px}
            .protyle-wysiwyg .h6 img.emoji, .b3-typography h6 img.emoji {width:20px}
        </style>
    </head>
    <body>
    <div class="protyle-wysiwyg protyle-wysiwyg--attr" style="max-width: 800px;margin: 0 auto;" id="preview">

    <div data-subtype="h2" data-node-id="20220501134357-003dftr" data-node-index="0" data-type="NodeHeading" class="h2" updated="20230403113939"><div contenteditable="true" spellcheck="false">概述</div><div class="protyle-attr" contenteditable="false">​</div></div><div data-node-id="20220501134418-ql8s90v" data-node-index="1" data-type="NodeParagraph" class="p" updated="20220615111558"><div contenteditable="true" spellcheck="false">数据历史主要用于保证<span data-type="virtual-block-ref">数据安全</span>，即使发生误操作也能通过历史进行数据回滚。数据历史分为两个功能：</div><div class="protyle-attr" contenteditable="false">​</div></div><div data-subtype="u" data-node-id="20220615111559-oiv8079" data-node-index="2" data-type="NodeList" class="list" updated="20220615112117"><div data-marker="*" data-subtype="u" data-node-id="20220615111600-89ecgx0" data-type="NodeListItem" class="li" updated="20220615111600"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220615111600-ag04crg" data-type="NodeParagraph" class="p" updated="20220615112026"><div contenteditable="true" spellcheck="false"><span data-type="virtual-block-ref">文件历史</span>：按原始文件方式保存在 <span data-type="code">​工作空间/history/</span>​ 文件夹下，<span data-type="virtual-block-ref">人</span>类可读，可手动拷贝到 data 对应位置恢复</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-marker="*" data-subtype="u" data-node-id="20220615111601-l9ydpwh" data-type="NodeListItem" class="li" updated="20220615112117"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220615111601-8oaj5t3" data-type="NodeParagraph" class="p" updated="20220615112117"><div contenteditable="true" spellcheck="false"><span data-type="virtual-block-ref">数据快照</span>：按文件分块、加密并压缩保存在 <span data-type="code">​工作空间/repo/</span>​ 文件夹下，<span data-type="virtual-block-ref">人</span>类不可读，无法手动恢复</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-node-id="20220615112117-57abhen" data-node-index="3" data-type="NodeParagraph" class="p" updated="20220830225617"><div contenteditable="true" spellcheck="false"><span data-type="virtual-block-ref">数据快照</span>除了用于本地数据历史，还用于云端<span data-type="block-ref" data-subtype="s" data-id="20230808120347-3cob0nb">数据同步</span>。</div><div class="protyle-attr" contenteditable="false">​</div></div><div data-subtype="h2" data-node-id="20220615111435-ownalnb" data-node-index="4" data-type="NodeHeading" class="h2" updated="20220615111459" refcount="1"><div contenteditable="true" spellcheck="false">文件历史</div><div class="protyle-attr" contenteditable="false"><div class="protyle-attr--refcount popover__block">1</div>​</div></div><div data-subtype="h3" data-node-id="20220615111435-mm5qpqp" data-node-index="5" data-type="NodeHeading" class="h3" updated="20220615112944"><div contenteditable="true" spellcheck="false"><span data-type="virtual-block-ref">文件历史</span>生成规则</div><div class="protyle-attr" contenteditable="false">​</div></div><div data-subtype="u" data-node-id="20210403160319-ufy7jta" data-node-index="6" data-type="NodeList" class="list" updated="20230403114310"><div data-marker="*" data-subtype="u" data-node-id="20210403160319-8uzmero" data-type="NodeListItem" class="li" updated="20220831210638"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20210524213102-cwl7v2f" data-type="NodeParagraph" class="p" updated="20220831210638"><div contenteditable="true" spellcheck="false">每隔 10 分钟会对这 10 分钟内更新过的文档生成历史（间隔时间可通过 <span data-type="kbd">​设置</span>​​ - <span data-type="kbd">​编辑器</span>​​ - <span data-type="kbd">​历史生成间隔</span>​​ 进行调整），历史文件夹后缀为 <span data-type="code">​-update</span>​​</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-marker="*" data-subtype="u" data-node-id="20220501134315-6omumob" data-type="NodeListItem" class="li" updated="20220501134735"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501134315-1h4mvgn" data-type="NodeParagraph" class="p" updated="20220501134735"><div contenteditable="true" spellcheck="false">云端同步时，本地被云端覆盖的数据会生成历史，历史文件夹后缀为 <span data-type="code">​-sync</span>​​</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-marker="*" data-subtype="u" data-node-id="20220501134333-kamak39" data-type="NodeListItem" class="li" updated="20220501134747"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501134333-1f6hbi9" data-type="NodeParagraph" class="p" updated="20220501134747"><div contenteditable="true" spellcheck="false">手动删除笔记本、文档和<span data-type="virtual-block-ref">资源文件</span>时会生成历史，历史文件夹后缀为 <span data-type="code">​-delete</span>​​</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-marker="*" data-subtype="u" data-node-id="20210524213119-wybx1kh" data-type="NodeListItem" class="li" updated="20220830225509"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20210524213119-ofmb315" data-type="NodeParagraph" class="p" updated="20220830225509"><div contenteditable="true" spellcheck="false">使用<span data-type="block-ref" data-subtype="s" data-id="20210115222011-bzsftun">清理未引用资源</span>时会生成历史，历史文件夹后缀为 <span data-type="code">​-clean</span>​​</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-marker="*" data-subtype="u" data-node-id="20220501134920-qb6wh0b" data-type="NodeListItem" class="li" updated="20230403114300"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501134920-k403n1r" data-type="NodeParagraph" class="p" updated="20230403114300"><div contenteditable="true" spellcheck="false">使用<span data-type="block-ref" data-subtype="s" data-id="20220628204444-9n0y9h2">优化排版</span>时会生成历史，历史文件夹后缀为 <span data-type="code">​-format</span>​​</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-marker="*" data-subtype="u" data-node-id="20230403113929-44xkaoz" data-type="NodeListItem" class="li" updated="20230403114310"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20230403113929-ud36ubv" data-type="NodeParagraph" class="p" updated="20230403114310"><div contenteditable="true" spellcheck="false">使用 <span data-type="kbd">​搜索替换</span>​​ 时会生成历史，历史文件夹后缀为 <span data-type="code">​-replace</span>​​</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-subtype="h3" data-node-id="20210104090742-f9nkimo" data-node-index="7" data-type="NodeHeading" class="h3" updated="20220615112949"><div contenteditable="true" spellcheck="false">浏览<span data-type="virtual-block-ref">文件历史</span></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-subtype="u" data-node-id="20210104090742-8rmcz3i" data-node-index="8" data-type="NodeList" class="list" updated="20220830230716"><div data-marker="*" data-subtype="u" data-node-id="20220501135052-k47n4ms" data-type="NodeListItem" class="li" updated="20220830230716"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501135052-o3r30jj" data-type="NodeParagraph" class="p" updated="20220830230716"><div contenteditable="true" spellcheck="false">点击顶部<span data-type="virtual-block-ref">工具</span>栏 <span data-type="kbd">​数据历史</span>​ 按钮或者 <span data-type="kbd">​Alt+H</span>​ 可打开数据历史界面，切换到 <span data-type="kbd">​文件历史</span>​ 页签，如果没有历史数据显示，可以试下该界面的 <span data-type="kbd">​重建索引</span>​</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-marker="*" data-subtype="u" data-node-id="20220501135057-pa9pcyo" data-type="NodeListItem" class="li" updated="20220501135111"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501135057-4hmpdzy" data-type="NodeParagraph" class="p" updated="20220501135111"><div contenteditable="true" spellcheck="false">在文件系统 <span data-type="code">​工作空间/history/</span>​ 文件夹下浏览</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-subtype="h3" data-node-id="20210104090742-hjfornp" data-node-index="9" data-type="NodeHeading" class="h3" updated="20220615112957"><div contenteditable="true" spellcheck="false">通过<span data-type="virtual-block-ref">文件历史</span>回滚</div><div class="protyle-attr" contenteditable="false">​</div></div><div data-node-id="20210121105921-zdk68jf" data-node-index="10" data-type="NodeParagraph" class="p" updated="20220615120058"><div contenteditable="true" spellcheck="false">在数据历史界面左侧时间列表栏中，每一条历史记录右侧都有一个回滚按钮，点击以后将弹出确认对话框，如果确认回滚的话将使用<span data-type="virtual-block-ref">文件历史</span>覆盖现有文件。</div><div class="protyle-attr" contenteditable="false">​</div></div><div data-node-id="20220501133017-3hecoih" data-node-index="11" data-type="NodeParagraph" class="p" updated="20220501133133"><div contenteditable="true" spellcheck="false">如果有非常多的文件需要回滚，建议手动在文件系统上复制。历史文件夹的内部结构和 data 内部结构一致，比如：</div><div class="protyle-attr" contenteditable="false">​</div></div><div data-subtype="u" data-node-id="20220501133105-b25vi0a" data-node-index="12" data-type="NodeList" class="list" updated="20220831210446"><div data-marker="*" data-subtype="u" data-node-id="20220501133105-kzow9y3" data-type="NodeListItem" class="li" updated="20220501133105"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501133105-1dmg0zl" data-type="NodeParagraph" class="p" updated="20220501133105"><div contenteditable="true" spellcheck="false">笔记本删除：<span data-type="code">​2022-05-01-091021-delete/20210808180117-czj9bvb/</span>​，即 <span data-type="code">​历史生成日期-{操作}/{笔记本 ID}/</span>​</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-marker="*" data-subtype="u" data-node-id="20220501133105-ham1o5d" data-type="NodeListItem" class="li" updated="20220501134003"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501133105-a1rwa0u" data-type="NodeParagraph" class="p" updated="20220501134003"><div contenteditable="true" spellcheck="false">文档删除：<span data-type="code">​2022-05-01-091209-delete/20210808180117-czj9bvb/20200812220555-lj3enxa.sy</span>​，即 <span data-type="code">​历史生成日期-{操作}/{笔记本 ID}/{文档路径}</span>​</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-marker="*" data-subtype="u" data-node-id="20220501133105-486vgy6" data-type="NodeListItem" class="li" updated="20220831210446"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220501133105-jqnfpzv" data-type="NodeParagraph" class="p" updated="20220831210446"><div contenteditable="true" spellcheck="false"><span data-type="virtual-block-ref">资源文件</span>清理：<span data-type="code">​2022-05-01-095621-clean/assets/image-20220501091157-qccp87e.png</span>​，即 <span data-type="code">​历史生成日期-{操作}/assets/{资源文件名}</span>​</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-node-id="20220501133041-w6ydfgw" data-node-index="13" data-type="NodeParagraph" class="p" updated="20220501133251"><div contenteditable="true" spellcheck="false">手动回滚操作步骤：</div><div class="protyle-attr" contenteditable="false">​</div></div><div data-subtype="o" data-node-id="20220501133237-il09opg" data-node-index="14" data-type="NodeList" class="list" updated="20220615111149"><div data-marker="1." data-subtype="o" data-node-id="20220501133254-az0u30r" data-type="NodeListItem" class="li" updated="20220501133340"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">1.</div><div data-node-id="20220501133254-4ztj9yt" data-type="NodeParagraph" class="p" updated="20220501133340"><div contenteditable="true" spellcheck="false">退出<span data-type="virtual-block-ref">思源</span>，然后全量复制<span data-type="virtual-block-ref">备份</span>一下整个<span data-type="virtual-block-ref">工作空间</span>，避免后续误操作导致数据丢失</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-marker="2." data-subtype="o" data-node-id="20220501133342-7fu44br" data-type="NodeListItem" class="li" updated="20220501133421"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">2.</div><div data-node-id="20220501133342-j92vqhx" data-type="NodeParagraph" class="p" updated="20220501133421"><div contenteditable="true" spellcheck="false">进入 <span data-type="code">​工作空间/history/</span>​ 文件夹，将 <span data-type="code">​历史生成日期-{操作}</span>​ 文件夹下的数据直接复制到 data 文件夹进行覆盖</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-marker="3." data-subtype="o" data-node-id="20220501133422-0nxnwc2" data-type="NodeListItem" class="li" updated="20220615111149"><div class="protyle-action protyle-action--order" contenteditable="false" draggable="true">3.</div><div data-node-id="20220501133422-gc6qund" data-type="NodeParagraph" class="p" updated="20220615111149"><div contenteditable="true" spellcheck="false">启动<span data-type="virtual-block-ref">思源</span>后手动执行重建索引</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-subtype="h3" data-node-id="20220615115547-2fr6uej" data-node-index="15" data-type="NodeHeading" class="h3" updated="20220615115551"><div contenteditable="true" spellcheck="false">清理<span data-type="virtual-block-ref">文件历史</span></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-node-id="20220615115551-u75o5mk" data-node-index="16" data-type="NodeParagraph" class="p" updated="20220615115618"><div contenteditable="true" spellcheck="false">默认自动保存最近 30 天生成的<span data-type="virtual-block-ref">文件历史</span>，可通过 <span data-type="kbd">​设置</span>​ - <span data-type="kbd">​编辑器</span>​ - <span data-type="kbd">​历史保留天数</span>​ 进行调整，超过该期限的<span data-type="virtual-block-ref">文件历史</span>会被自动删除。</div><div class="protyle-attr" contenteditable="false">​</div></div><div data-node-id="20220615115625-3dx0t1j" data-node-index="17" data-type="NodeParagraph" class="p" updated="20220830230414"><div contenteditable="true" spellcheck="false">如果你想清空所有<span data-type="virtual-block-ref">文件历史</span>数据，可以点击 <span data-type="kbd">​设置</span>​ - <span data-type="kbd">​编辑器</span>​ - <span data-type="kbd">​清空所有历史</span>​，或者手动删除 <span data-type="code">​工作空间/history/</span>​ 文件夹，然后在 <span data-type="kbd">​文件历史</span>​ 中 <span data-type="kbd">​重建索引</span>​。</div><div class="protyle-attr" contenteditable="false">​</div></div><div data-subtype="h2" data-node-id="20220615112531-5yos96d" data-node-index="18" data-type="NodeHeading" class="h2" updated="20220615112535" refcount="2"><div contenteditable="true" spellcheck="false">数据快照</div><div class="protyle-attr" contenteditable="false"><div class="protyle-attr--refcount popover__block">2</div>​</div></div><div data-subtype="h3" data-node-id="20220615113758-i2279ot" data-node-index="19" data-type="NodeHeading" class="h3" updated="20220615113939" refcount="2"><div contenteditable="true" spellcheck="false">初始化密钥</div><div class="protyle-attr" contenteditable="false"><div class="protyle-attr--refcount popover__block">2</div>​</div></div><div data-node-id="20220615113752-lbtlf6j" data-node-index="20" data-type="NodeParagraph" class="p" updated="20220615113952"><div contenteditable="true" spellcheck="false">第一次使用<span data-type="virtual-block-ref">数据快照</span>前需要在 <span data-type="kbd">​设置</span>​ - <span data-type="kbd">​关于</span>​ 中初始化 <span data-type="kbd">​数据仓库密钥</span>​。</div><div class="protyle-attr" contenteditable="false">​</div></div><div data-node-id="20220722001510-mtrrbj0" data-node-index="21" data-type="NodeParagraph" class="p" updated="20220722001555"><div contenteditable="true" spellcheck="false">初始化密钥有三种方式：</div><div class="protyle-attr" contenteditable="false">​</div></div><div data-subtype="u" data-node-id="20220722001555-3wcanjb" data-node-index="22" data-type="NodeList" class="list" updated="20220722001917" refcount="1"><div data-marker="*" data-subtype="u" data-node-id="20220722001556-sjm48yn" data-type="NodeListItem" class="li" updated="20220722001556"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220722001556-8sc4mqb" data-type="NodeParagraph" class="p" updated="20220722001656"><div contenteditable="true" spellcheck="false">​<span data-type="kbd">​导入密钥</span>​：将其他设备上的密钥字符串复制到此粘贴导入</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-marker="*" data-subtype="u" data-node-id="20220722001657-79plg0z" data-type="NodeListItem" class="li"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220722001657-gh22p4n" data-type="NodeParagraph" class="p" updated="20220722001831"><div contenteditable="true" spellcheck="false">​<span data-type="kbd">​自动生成密钥</span>​：使用随机数生成密钥，该方式只需在一台设备上执行一次，其他设备使用 <span data-type="kbd">​导入密钥</span>​</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div data-marker="*" data-subtype="u" data-node-id="20220722001834-8kc1pdr" data-type="NodeListItem" class="li" updated="20220722001917"><div class="protyle-action" draggable="true"><svg><use xlink:href="#iconDot"></use></svg></div><div data-node-id="20220722001834-13o5rzz" data-type="NodeParagraph" class="p" updated="20220722001917"><div contenteditable="true" spellcheck="false">​<span data-type="kbd">​通过密码生成密钥</span>​：使用自定义的密码短语生成密钥，该方式需要在所有设备上都使用相同的密码短语</div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false">​</div></div><div class="protyle-attr" contenteditable="false"><div class="protyle-attr--refcount popover__block">1</div>​</div></div>

    </div>
    <script src="../../appearance/icons/material/icon.js?2.10.2"></script>
    <script src="../../stage/build/export/protyle-method.js?2.10.2"></script>
    <script src="../../stage/protyle/js/lute/lute.min.js?2.10.2"></script>
    <script>
        window.siyuan = {
          config: {
            appearance: { mode: 0, codeBlockThemeDark: "base16/dracula", codeBlockThemeLight: "github" },
            editor: {
              codeLineWrap: true,
              codeLigatures: false,
              plantUMLServePath: "https://www.plantuml.com/plantuml/svg/~1",
              codeSyntaxHighlightLineNum: true,
              katexMacros: JSON.stringify({}),
            }
          },
          languages: {copy:"复制"}
        };
        const previewElement = document.getElementById('preview');
        Protyle.highlightRender(previewElement, "stage/protyle");
        Protyle.mathRender(previewElement, "stage/protyle", false);
        Protyle.mermaidRender(previewElement, "stage/protyle");
        Protyle.flowchartRender(previewElement, "stage/protyle");
        Protyle.graphvizRender(previewElement, "stage/protyle");
        Protyle.chartRender(previewElement, "stage/protyle");
        Protyle.mindmapRender(previewElement, "stage/protyle");
        Protyle.abcRender(previewElement, "stage/protyle");
        Protyle.htmlRender(previewElement);
        Protyle.plantumlRender(previewElement, "stage/protyle");
        document.querySelectorAll(".protyle-action__copy").forEach((item) => {
          item.addEventListener("click", (event) => {
                navigator.clipboard.writeText(item.parentElement.nextElementSibling.textContent.trimEnd());
                event.preventDefault();
                event.stopPropagation();
          })
        });
    </script></body></html>